"use strict";(self["webpackJsonpother-root"]=self["webpackJsonpother-root"]||[]).push([["src_app_components_dashboard_dashboard_module_ts"],{57998:(t,e,n)=>{n.r(e),n.d(e,{DashboardModule:()=>_n});var i=n(31836),a=n(91792),r=n(26919),o=n(52191),s=n(53850),l=n(8208),d=n(88913),c=n(11807),p=n(85905);const h=`${r.Zb}dashboard/`,m=`${r.Zb}dashboard/v2/`,u=`${h}graphs`,g=`${h}heatmap`,f=`${m}graphs`,v=`${m}heatmap`,x=`${h}servers/add`,b=`${h}servers/remove`,C=`${h}servers`,y=`${h}events-for-group`;var w=(()=>(function(t){t.heatmap="heatmap",t.histogram="histogram",t.doughnut="doughnut"}(w||(w={})),w))(),M=(()=>(function(t){t.heatmap="heatmap",t.graphs="graphs"}(M||(M={})),M))(),S=(()=>(function(t){t.poor="poor",t.medium="medium",t.good="good",t.unknown="unknown"}(S||(S={})),S))();function _(t){switch(t){case 3:return S.good;case 2:return S.medium;case 1:return S.poor;default:return S.unknown}}let I=(()=>{class t{constructor(t,e,n,i,a,r){this.http=t,this.licenseState=e,this.route=n,this.router=i,this.appState=a,this.authCloudService=r}get id(){return r.cT||this.licenseState.license.value.id}canActivate(t,e){if(this.licenseState.eula.value.isFailed()){const t=["/",IMUNIFY_PACKAGE,"admin","eula"];return this.router.navigate(t,{relativeTo:this.route}),!1}return!0}getHeatmapCharts(t){return this.appState.demo?(0,a.of)(i.p.heatmap).pipe((0,a.delay)(100)):this.getCharts(M.heatmap,t)}getHistogramCharts(t){return this.appState.demo?(0,a.of)(i.p.histogramGrouped(t.group_by)).pipe((0,a.delay)(100)):this.getCharts(M.graphs,t)}getCharts(t,e){const n=localStorage.getItem("ENABLE_DASHBOARD_API_V1")||!1;return(this.licenseState.license.value.id===e.server_id&&!n?this.getChartsV2(t,e):this.getChartsV1(t,e)).pipe((0,a.catchError)(()=>(0,a.of)(null)))}getChartsV1(t,e){const n=t===M.graphs,i=n?u:g;return this.http.get(i,{params:{charts:e.charts.join(","),...n?{group_by:e.group_by}:{},start:e.since,end:e.to||Math.round(Date.now()/1e3),server_id:e.server_id}})}getChartsV2(t,e){const n=t===M.graphs,i=n?f:v;return this.authCloudService.getJwtToken().pipe((0,a.switchMap)(a=>a?this.http.get(i,{headers:{"X-Auth":a},params:{charts:e.charts.join(","),...n?{group_by:e.group_by}:{},start:e.since,end:e.to||Math.round(Date.now()/1e3)}}):this.getChartsV1(t,e)))}getServerIds(t){return this.licenseState.license.pipe((0,a.first)(t=>!!t.id),(0,a.switchMap)(()=>(t||(t=this.http.get(C,{params:{server_id:this.id}})),(0,a.forkJoin)(t,this.appState.demo?(0,a.of)({result:[]}):this.http.get(y,{params:{server_id:this.id}})).pipe((0,a.map)(t=>{const e=t[0],n=t[1],i=function(t){const e=t.result.map(t=>({server_id:t.server_id,id:t.nodename||t.ip||t.server_id}));for(const t of e){const n=e.filter(e=>e.id===t.id);if(n.length>1)for(const t of n)t.id=`${t.id} (${t.server_id})`}return e}(e).map(t=>{const e=n.result.filter(e=>e.server_id===t.server_id),i=Math.min(3,...e.map(t=>t.severity));return{server_id:t.server_id,id:t.id,severity:_(i),recommendations:e.reduce((t,e)=>(t[_(e.severity)].push(e),t),{[S.poor]:[],[S.medium]:[],[S.good]:[]})}});return i.sort((t,e)=>t.severity===e.severity?t.id<e.id?-1:1:t.severity<e.severity?1:-1),i})))))}addServerId(t){return this.licenseState.license.pipe((0,a.first)(t=>!!t.id),(0,a.switchMap)(()=>this.http.post(x,{server_ids:t},{params:{server_id:this.id}})))}deleteServerId(t){return this.http.post(b,{server_ids:[t]},{params:{server_id:this.id}})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275inject"](l.HttpClient),s["\u0275\u0275inject"](d.u),s["\u0275\u0275inject"](o.ActivatedRoute),s["\u0275\u0275inject"](o.Router),s["\u0275\u0275inject"](c.a),s["\u0275\u0275inject"](p.M))},t.\u0275prov=s["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})();var O=n(45361),P=n(75293),E=n(48810),k=n(60136),A=n(62143),B=n(94273),T=n(41380),$=n(49771),j=n(66826),z=n(89560),N=n(39153),D=n(77967),F=n(79544),L=n(15815);let V=(()=>{class t extends N.t{constructor(t,e,n,i,a,r){super(e,n,i,a,r),this.licenseState=t}ngAfterContentInit(){this.licenseState.license.pipe((0,a.first)(t=>!!t.id)).subscribe(()=>super.ngAfterContentInit())}_load(t){this.setData(t.result)}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](d.u),s["\u0275\u0275directiveInject"](o.ActivatedRoute),s["\u0275\u0275directiveInject"](o.Router),s["\u0275\u0275directiveInject"](s.NgZone),s["\u0275\u0275directiveInject"](F.b,8),s["\u0275\u0275directiveInject"](L.e))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["","i360ServerRequest",""]],features:[s["\u0275\u0275ProvidersFeature"]([{provide:D.Z,useExisting:t}]),s["\u0275\u0275InheritDefinitionFeature"]]}),t})();var R=n(8264),W=n(64970),G=n(73276),Q=n(14633),q=n(71670),Z=n(10932),Y=n(16901),U=n.n(Y),H=n(14570),K=n(47509),X=n.n(K),J=n(43433),tt=n.n(J),et=n(76410),nt=n.n(et),it=n(87772),at=n.n(it),rt=n(34005),ot=n.n(rt);U().extend(tt()),U().extend(nt()),U().extend(at()),U().extend(X()),U().extend(ot());const st={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};H._adapters._date.override({formats:()=>st,parse:function(t,e){const n=typeof t;return null===t||"undefined"===n?null:"string"===n&&"string"==typeof e?U()(t,e).isValid()?U()(t,e).valueOf():null:t instanceof U()?null:U()(t).isValid()?U()(t).valueOf():null},format:function(t,e){return U()(t).format(e)},add:function(t,e,n){return U()(t).add(e,n).valueOf()},diff:function(t,e,n){return U()(t).diff(U()(e),n)},startOf:function(t,e,n){if("isoWeek"===e){const e="number"==typeof n&&n>0&&n<7?n:1;return U()(t).isoWeekday(e).startOf("day").valueOf()}return U()(t).startOf(e).valueOf()},endOf:function(t,e){return U()(t).endOf(e).valueOf()}});let lt=(()=>{class t{constructor(t,e){this.element=t,this.translate=e,this.data=[],this.lines=[],this.labels=[],this.colors=[],this.chartInitialized=!1,this.pendingUpdate=!1,this.timeFromFormat="",this.timeToFormat="",this.eventsFormat="",this.langChangeSubscription=this.translate.translate.onLangChange.subscribe(()=>{this.updateTranslation(),this.chart&&this.chart.update()}),this.resizeSubscription=(0,a.fromEvent)(window,"resize").pipe((0,a.debounceTime)(400)).subscribe(()=>{this.chart&&this.chart.resize()}),this.updateTranslation(),H.Chart.register(...H.registerables)}ngAfterViewInit(){setTimeout(()=>{this.data&&this.data.length>0&&!this.chartInitialized&&this.initializeChart()},0)}initializeChart(){if(this.chartInitialized||this.chart)return;const t=this.element.nativeElement;if(0===t.offsetWidth||0===t.offsetHeight){const e=t.parentElement;if(!(e&&e.offsetWidth>0))return void setTimeout(()=>{!this.chartInitialized&&this.data&&this.data.length>0&&this.initializeChart()},100);t.width=e.offsetWidth,t.height=Math.floor(t.width/1.6666666)}const e=t.getContext("2d"),n={type:"bar",data:{labels:this.labels,datasets:this.getDatasets()},options:{responsive:!1,aspectRatio:1.6666666,plugins:{legend:{display:!1},tooltip:{callbacks:{title:t=>{const e=t=>U()(t?.x).format("D MMM LT"),n=t[0].dataIndex,i=t[0].dataset.data;return this.timeFromFormat.replace("{from}",e(i[n]))+"\n"+this.timeToFormat.replace("{to}",e(i[n+1]))},label:t=>this.eventsFormat.replace("{numberOfEvents}",t.formattedValue)},backgroundColor:"#4b5c6b",titleMarginBottom:7,cornerRadius:3,caretSize:0,caretPadding:20,displayColors:!1,yPadding:14,xPadding:17,titleFontSize:13,titleFontFamily:"Open Sans",bodyFontSize:13,bodyFontFamily:"Open Sans",mode:"x",intersect:!1}},scales:{x:{offset:!0,type:"time",time:{displayFormats:{day:"D MMM",hour:"D MMM | LT",millisecond:"LT"}},ticks:{autoSkip:!0,autoSkipPadding:8,maxRotation:0,padding:10,fontFamily:"Open Sans",fontColor:"#788896",fontSize:11,callback:t=>t.split(" | ")},grid:{display:!1}},y:{grid:{color:"#e4e7ec",zeroLineColor:"#e4e7ec",lineWidth:2,zeroLineWidth:2,drawBorder:!1},ticks:{maxTicksLimit:5,fontColor:"#788896",fontSize:11,padding:11,fontFamily:"Open Sans",beginAtZero:!0,callback:t=>{if(t%1==0)return t}}}}}};this.chart=new H.Chart(e,n),this.chartInitialized=!0,this.pendingUpdate&&(this.pendingUpdate=!1,this.updateChart()),setTimeout(()=>{this.chart&&this.chart.resize()},100)}updateChart(){this.chart&&(this.chart.data.labels=this.labels,this.chart.data.datasets=this.getDatasets(),this.chart.update())}ngOnChanges(t){if(this.data){if(this.colors=t.colors?.currentValue||this.colors,this.data=t.data?.currentValue||this.data,this.lines=t.lines?.currentValue||this.lines,this.labels=t.labels?.currentValue||this.labels,!this.chartInitialized&&this.data.length>0)return this.pendingUpdate=!0,void setTimeout(()=>{!this.chartInitialized&&this.data.length>0&&this.initializeChart()},100);this.chartInitialized&&this.updateChart()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.langChangeSubscription.unsubscribe(),this.resizeSubscription.unsubscribe()}getDatasets(){return this.data.map((t,e)=>({data:t,label:this.lines[e],backgroundColor:this.colors[e],borderColor:this.colors[e],barPercentage:.95,categoryPercentage:.95}))}toggleLine(t){if(!this.chart)return;let e=this.chart.getDatasetMeta(t);e.hidden=null===e.hidden||null,this.chart.update()}updateTranslation(){var t=this;return(0,q.Z)(function*(){t.timeFromFormat=yield t.translate.t("dashboard.charts.timeFrom",{from:"{from}"}),t.timeToFormat=yield t.translate.t("dashboard.charts.timeTo",{to:"{to}"}),t.eventsFormat=yield t.translate.t("dashboard.charts.events",{numberOfEvents:"{numberOfEvents}"})})()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](R.sK))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["canvas","baseChart",""]],inputs:{data:"data",lines:"lines",labels:"labels",colors:"colors"},features:[s["\u0275\u0275NgOnChangesFeature"]]}),t})();const dt=function(t){return{"border-color":t}};function ct(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"li",1),s["\u0275\u0275listener"]("click",function(){const e=s["\u0275\u0275restoreView"](t).index,n=s["\u0275\u0275nextContext"]();return s["\u0275\u0275resetView"](n.clicked(e))}),s["\u0275\u0275element"](1,"span",2),s["\u0275\u0275elementStart"](2,"span"),s["\u0275\u0275text"](3),s["\u0275\u0275elementEnd"]()()}if(2&t){const t=e.$implicit,n=e.index,i=s["\u0275\u0275nextContext"]();s["\u0275\u0275classProp"]("striked",i.striked[n]),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngStyle",s["\u0275\u0275pureFunction1"](4,dt,i.colors[n])),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t)}}let pt=(()=>{class t{constructor(){this.striked=[],this.onClick=new s.EventEmitter}clicked(t){this.onClick.emit(t),this.striked[t]=!this.striked[t]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-legend"]],inputs:{lines:"lines",colors:"colors",striked:"striked"},outputs:{onClick:"onClick"},decls:2,vars:1,consts:[[3,"striked","click",4,"ngFor","ngForOf"],[3,"click"],[1,"circle",3,"ngStyle"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"ul"),s["\u0275\u0275template"](1,ct,4,6,"li",0),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",e.lines))},dependencies:[k.NgForOf,k.NgStyle],styles:["[_nghost-%COMP%] {\n  color: #1d1d1d;\n}\n\nul[_ngcontent-%COMP%] {\n  margin-top: 0;\n  margin-bottom: 30px;\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n}\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  list-style: none;\n  font-size: 15px;\n  cursor: pointer;\n  -webkit-user-select: none;\n          user-select: none;\n  margin-bottom: 10px;\n}\n\n.ltr[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  margin-right: 20px;\n}\n\n.rtl[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\n  margin-left: 20px;\n}\n\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%] {\n  border-radius: 50%;\n  border: 4px solid;\n  width: 24px;\n  height: 24px;\n  display: inline-block;\n  position: relative;\n}\n\n.ltr[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%] {\n  margin-right: 13px;\n}\n\n.rtl[_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%] {\n  margin-left: 13px;\n}\n\nul[_ngcontent-%COMP%]   .striked[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n  text-decoration: line-through;\n  color: #707070 !important;\n}\n\nul[_ngcontent-%COMP%]   .striked[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%] {\n  border-color: #707070 !important;\n}"]}),t})();function ht(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"i360-legend",2),s["\u0275\u0275listener"]("onClick",function(e){s["\u0275\u0275restoreView"](t);const n=s["\u0275\u0275nextContext"]();return s["\u0275\u0275resetView"](n.directive.toggleLine(e))}),s["\u0275\u0275elementEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275property"]("lines",t.lines)("colors",t.colors)("striked",t.striked)}}let mt=(()=>{class t{constructor(t){this.dataLoader=t,this.onLoaded=a.Subscription.EMPTY}ngAfterContentInit(){this.onLoaded=this.dataLoader.loaded.subscribe(t=>this.load(t))}load(t){var e=this;return(0,q.Z)(function*(){e.colors=[],e.striked=[],e.labels=[],e.data=[],e.lines=[],t[0].forEach((t,n)=>{n>0&&(e.colors.push((0,Z.L)(n-1)),e.data[n-1]=[])}),t.forEach(t=>{e.labels.push(new Date(1e3*t[0])),t.forEach((n,i)=>{i>0&&e.data[i-1].push({x:new Date(1e3*t[0]),y:n})})})})()}ngOnDestroy(){this.onLoaded.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](j.g))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-chart"]],viewQuery:function(t,e){if(1&t&&s["\u0275\u0275viewQuery"](lt,7),2&t){let t;s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.directive=t.first)}},decls:3,vars:5,consts:[[3,"lines","colors","striked","onClick",4,"ngIf"],["baseChart","",3,"data","labels","lines","colors"],[3,"lines","colors","striked","onClick"]],template:function(t,e){1&t&&(s["\u0275\u0275template"](0,ht,1,3,"i360-legend",0),s["\u0275\u0275elementStart"](1,"div"),s["\u0275\u0275element"](2,"canvas",1),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275property"]("ngIf",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("data",e.data)("labels",e.labels)("lines",e.lines)("colors",e.colors))},dependencies:[k.NgIf,lt,pt],styles:["[_nghost-%COMP%] {\n  display: block;\n}\n.ltr   [_nghost-%COMP%] {\n  padding-left: 25px;\n}\n.rtl   [_nghost-%COMP%] {\n  padding-right: 25px;\n}\ndiv[_ngcontent-%COMP%] {\n  position: relative;\n}"]}),t})();var ut=n(34929),gt=n(65688),ft=n(26046),vt=n(41490),xt=n(27086),bt=n(83828),Ct=n(77544),yt=n(77741),wt=n(34118),Mt=n(52825),St=n(46557),_t=n.n(St),It=n(92013),Ot=n(13336),Pt=n(81813);const Et=["stub"];var kt=(()=>(function(t){t[t.bottom=0]="bottom",t[t.left=1]="left",t[t.right=2]="right",t[t.top=3]="top"}(kt||(kt={})),kt))();const At="#4b5c6b",Bt="#f4f5f7";class Tt{constructor(t){this.map=t}calculateBaseDimensions(){this.w=this.width/this.map.lastScale,this.h=this.height/this.map.lastScale,this.x=this.center[0]-this.w/2,this.y=this.center[1]-this.h}intersects(t,e=7/this.map.lastScale){return this.x+e<=t.x+e+t.w-e&&this.x+e+this.w-e>=t.x+e&&this.y+e<=t.y+e+t.h-e&&this.h-e+this.y+e>=t.y+e}}class $t extends Tt{constructor(t,e){super(t.map),this.padding=8,this.value=t.value+e.value,this.text=(0,z.zG)(this.value),this.width=this.height=this.map.getTextWidth(this.text)+2*this.padding;const n=t.value/e.value;this.center=[(n*t.center[0]+e.center[0])/(1+n),(n*t.center[1]+e.center[1])/(1+n)],this.calculateBaseDimensions(),this.r=this.w/2}calculateBaseDimensions(){super.calculateBaseDimensions(),this.y+=this.h/2}}class jt extends Tt{constructor(t,e,n,i){super(t),this.coordinates=e,this.name=n,this.value=i,this.height=35,this.r=3,this.count=1,this.padding=12,this.text=`${this.name?`${this.name}:`:""} ${(0,z.zG)(this.value)}`,this.width=t.getTextWidth(this.text)+2*this.padding}calculateBaseDimensions(){const t=this.map.screenBounds,e=t.filter(t=>(0,wt.Z)(this.coordinates,t)),n=this.coordinates.filter(e=>(0,wt.Z)(t,e));if(e.length>1&&e.length<4?n.push(...e.slice(1)):n.push(...e),n.length<4)this.center=[];else{this.center=_t()([n]),super.calculateBaseDimensions();const t=this.map.screenBounds,e=t[0][0],i=t[2][0],a=t[0][1],r=6/this.map.lastScale;this.y-=r,this.x<e?(this.arrowPosition=kt.left,this.x=this.center[0]+r,this.y=this.center[1]-this.h/2):this.x+this.w>i?(this.arrowPosition=kt.right,this.x=this.center[0]-this.w-r,this.y=this.center[1]-this.h/2):this.y<a?(this.arrowPosition=kt.top,this.y=this.center[1]+r):this.arrowPosition=kt.bottom}}intersects(t,e=4/this.map.lastScale){return super.intersects(t,e)}}class zt{constructor(t,e,n,i){this.xhr=t,this.countryService=e,this.loader=n,this.dataLoader=i,this.id="i360-map"+zt.counter++,this.onLoaded=a.Subscription.EMPTY,this.maxZoomLevel=50,this.initialPins=[]}getTextWidth(t){return this.stub.measureText(t).width}getValue(t,e){const n=t.find(t=>t[0]===e.properties.code);return n?n[1]:0}browserAbsolutePointToSvgTransitionCoordinates(t,e){const n=this.g.node(),i=this.svg.node();if(!i)return[];let a=i.createSVGPoint();return a.x=t,a.y=e,n&&(a=a.matrixTransform(n.getScreenCTM().inverse())),[a.x,a.y]}updateScreenBounds(){const t=this.svg.node();if(!t)return[];const{top:e,left:n,right:i,bottom:a}=t.getBoundingClientRect(),[r,o]=this.browserAbsolutePointToSvgTransitionCoordinates(n,e),[s,l]=this.browserAbsolutePointToSvgTransitionCoordinates(i,a);this.screenBounds=[[r,o],[r,l],[s,l],[s,o]]}groupMarkers(){this.updateScreenBounds();let t,e,n,i=this.initialPins.filter(t=>(t.calculateBaseDimensions(),t.center.length)),a=[];for(;;){n=!1;for(let r=0;r<i.length;r++)if(t=i[r],t){for(let o=r+1;o<i.length;o++)if(e=i[o],e&&t.intersects(e)){a.push(new $t(t,e)),i[o]=i[r]=null,n=!0;break}i[r]&&(a.push(t),i[r]=null)}if(!n)return a;i=a,a=[]}}removeMarkers(){this.markersG.selectAll("*").remove()}createMarkers(){const t=this.groupMarkers();if(!t.length)return;const e=t.filter(t=>t instanceof jt),n=t.filter(t=>t instanceof $t);this.markersG.selectAll().data(n).enter().append("circle").attr("fill",At).attr("stroke","#6657ff").attr("stroke-width",4/this.lastScale).attr("cx",t=>t.center[0]).attr("cy",t=>t.center[1]).attr("r",t=>t.r).attr("fill-opacity",1),this.markersG.selectAll().data(e).enter().append("path").attr("d",({x:t,y:e,w:n,h:i,r:a,arrowPosition:r})=>{const o=6/this.lastScale,s=a/this.lastScale,l=[`M ${t+n-s} ${e+i}`,`Q ${t+n} ${e+i} ${t+n} ${e+i-s}`,`L ${t+n} ${e+s}`,`Q ${t+n} ${e} ${t+n-s} ${e}`,`L ${t+s} ${e}`,`Q ${t} ${e} ${t} ${e+s}`,`L ${t} ${e+i-s}`,`Q ${t} ${e+i} ${t+s} ${e+i}`,`L ${t+n} ${e+i}`,"Z"];switch(r){case kt.top:l.splice(4,1,`L ${t+n/2+o} ${e}`,`L ${t+n/2} ${e-o}`,`L ${t+n/2-o} ${e}`);break;case kt.right:l.splice(2,1,`L ${t+n} ${e+i/2+o}`,`L ${t+n+o} ${e+i/2}`,`L ${t+n} ${e+i/2-o}`);break;case kt.left:l.splice(6,1,`L ${t} ${e+i/2-o}`,`L ${t-o} ${e+i/2}`,`L ${t} ${e+i/2+o}`);break;case kt.bottom:l.splice(8,1,`L ${t+n/2-o} ${e+i}`,`L ${t+n/2} ${e+i+o}`,`L ${t+n/2+o} ${e+i}`);break;default:throw new Error("not implemented")}return l.join(" ")}).attr("fill",At).attr("fill-opacity",1),this.markersG.selectAll().data(t).enter().append("text").text(t=>t.text).attr("x",t=>t.x+t.padding/this.lastScale).attr("y",t=>t.y+t.h/2).attr("dy","0.35em").attr("fill","#ffffff").style("font-size",13/this.lastScale+"px").style("font-weight",600)}zoomEnd(){this.createMarkers()}zoomStart(){this.removeMarkers()}zoomed(t){this.zoomStart();const e=t.transform,n=e.k;this.g.style("stroke-width",1/n).attr("transform",`translate(${e.x},${e.y}) scale(${e.k})`),this.lastScale=n,clearTimeout(this.zoomEndTimeout),this.zoomEndTimeout=setTimeout(()=>this.zoomEnd(),400)}createCountries(t){var e=this;return(0,q.Z)(function*(){const i=(yield n.e("src_app_components_dashboard_maps_topojson_ts").then(n.bind(n,58785))).countries,a=(0,gt.Z)(t,t=>t[1])||0,r=(0,Ct.ZP)("#e0e0e0","#38ab63"),o=(0,yt.Z)().domain([0,a]).range((0,ft.Z)(0,1,1/150).map(t=>r(t)));e.countriesG.selectAll("*").data(i).enter().append("path").attr("d",e.path).style("stroke",Bt),e.countriesG.selectAll("*").style("fill",n=>{const i=e.getValue(t,n);return o(i)}),e.initialPins=i.filter(e=>t.find(t=>t[0]===e.properties.code)).map(n=>{let i;if("MultiPolygon"===n.geometry.type){const t=n.geometry.coordinates.map(t=>t[0].length),e=Math.max(...t),a=t.indexOf(e);i=n.geometry.coordinates[a]}else i=n.geometry.coordinates;const a=e.getValue(t,n),r=e.countryService.getCountryNameByCode(n.properties.code);return new jt(e,i[0].map(t=>e.projection(t)),r,a)})})()}initMap(){const t=document.getElementById(this.id);this.lastScale=1,this.width=Math.floor(t.getBoundingClientRect().width),this.height=Math.floor(this.width/1.6666666);const e=(0,bt.sP)().scaleExtent([1,this.maxZoomLevel]).translateExtent([[0,0],[this.width,this.height]]).on("zoom",t=>this.zoomed(t)),n=(0,Mt.Z)(`#${this.id}`);n.selectAll("*").remove(),this.svg=n.insert("svg").attr("width",this.width).attr("height",this.height).attr("style",`background-color: ${Bt}; border-radius: 6px`).call(e),this.g=this.svg.insert("g"),this.countriesG=this.g.insert("g"),this.markersG=this.g.insert("g"),this.projection=(0,vt.ZP)().translate([this.width/2,this.height/1.6]).scale(this.width/2/Math.PI),this.path=(0,xt.Z)().projection(this.projection)}ngAfterViewInit(){var t=this;this.stub=this.canvas.nativeElement.getContext("2d"),this.stub.font='600 13px "Open Sans", sans-serif',this.onLoaded=(0,a.combineLatest)([this.dataLoader.loaded,(0,a.merge)((0,a.of)(null),(0,a.fromEvent)(window,"resize").pipe((0,a.debounceTime)(1e3))).pipe((0,a.tap)(()=>this.initMap())),this.countryService.loaded.pipe((0,a.filter)(a.identity))]).subscribe(function(){var e=(0,q.Z)(function*(e){yield t.createCountries(e[0]),t.removeMarkers(),t.createMarkers()});return function(t){return e.apply(this,arguments)}}())}ngOnDestroy(){this.onLoaded.unsubscribe()}}zt.counter=0,zt.\u0275fac=function(t){return new(t||zt)(s["\u0275\u0275directiveInject"](Ot.K),s["\u0275\u0275directiveInject"](Pt.T),s["\u0275\u0275directiveInject"](L.e),s["\u0275\u0275directiveInject"](j.g))},zt.\u0275cmp=s["\u0275\u0275defineComponent"]({type:zt,selectors:[["i360-map"]],viewQuery:function(t,e){if(1&t&&s["\u0275\u0275viewQuery"](Et,7),2&t){let t;s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.canvas=t.first)}},decls:3,vars:1,consts:[[1,"i360-maps",3,"id","wheel"],["stub",""]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275listener"]("wheel",function(){return!1}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](1,"canvas",null,1)),2&t&&s["\u0275\u0275property"]("id",e.id)},styles:["canvas[_ngcontent-%COMP%] {\n  position: absolute;\n  left: -20000px;\n}\n\n.i360-maps[_ngcontent-%COMP%] {\n  width: 100%;\n  display: flex;\n}"]}),(0,ut.gn)([It.U],zt.prototype,"createCountries",null);var Nt=n(38699);function Dt(t,e){1&t&&s["\u0275\u0275elementContainer"](0)}function Ft(t,e){1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275element"](1,"mat-icon",18),s["\u0275\u0275elementStart"](2,"a",19),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()),2&t&&(s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](4,1,"readMore.showLess")))}function Lt(t,e){1&t&&(s["\u0275\u0275element"](0,"mat-icon",20),s["\u0275\u0275elementStart"](1,"a",19),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](3,1,"readMore.readMore")))}function Vt(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"button",21),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2);return s["\u0275\u0275resetView"](e.navigate(e.availableValues.histogram))}),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"button",21),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"](2);return s["\u0275\u0275resetView"](e.navigate(e.availableValues.heatmap))}),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"]()}if(2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("round",!0)("primary",t.value===t.availableValues.histogram),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](3,6,"dashboard.incidentsAndAlerts.histogram")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("round",!0)("primary",t.value===t.availableValues.heatmap),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](6,8,"dashboard.incidentsAndAlerts.heatmap"))}}function Rt(t,e){1&t&&s["\u0275\u0275element"](0,"i360-chart")}function Wt(t,e){1&t&&s["\u0275\u0275element"](0,"i360-map")}function Gt(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Wt,1,0,"i360-map",0),s["\u0275\u0275pipe"](2,"async"),s["\u0275\u0275elementContainerEnd"]()),2&t){s["\u0275\u0275nextContext"]();const t=s["\u0275\u0275reference"](4),e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](2,2,e.loadedData).some(e.hasCountriesInHeatmapExpr))("ngIfElse",t)}}function Qt(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",23)(1,"div",24),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"]()()),2&t&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,1,"dashboard.incidentsAndAlerts.noGeoIp")," "))}function qt(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Rt,1,0,"i360-chart",13),s["\u0275\u0275template"](2,Gt,3,4,"ng-container",13),s["\u0275\u0275template"](3,Qt,4,3,"ng-template",null,22,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.value===t.availableValues.histogram),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.value===t.availableValues.heatmap)}}function Zt(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",23)(1,"div",24),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"]()()),2&t&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,1,"dashboard.incidentsAndAlerts.failedToFetch")," "))}function Yt(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275template"](1,Zt,4,3,"div",25),s["\u0275\u0275pipe"](2,"async"),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"](3);s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",null===s["\u0275\u0275pipeBind1"](2,1,t.loadedData))}}function Ut(t,e){if(1&t&&s["\u0275\u0275template"](0,Yt,3,3,"ng-container",13),2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275property"]("ngIf",void 0!==t.prevData)}}function Ht(t,e){if(1&t){const t=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div",2)(1,"div",3)(2,"div",4),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementStart"](5,"span",5),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275elementStart"](7,"div",6)(8,"div",7,8),s["\u0275\u0275projection"](10),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275elementStart"](11,"div",9)(12,"div",10),s["\u0275\u0275listener"]("click",function(){s["\u0275\u0275restoreView"](t);const e=s["\u0275\u0275nextContext"]();return s["\u0275\u0275resetView"](e.descriptionExpanded=!e.descriptionExpanded)}),s["\u0275\u0275template"](13,Ft,5,3,"ng-container",0),s["\u0275\u0275template"](14,Lt,4,3,"ng-template",null,11,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()()(),s["\u0275\u0275elementStart"](16,"div",12),s["\u0275\u0275template"](17,Vt,7,10,"ng-container",13),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275elementStart"](18,"div",14)(19,"div",15)(20,"div",16),s["\u0275\u0275template"](21,qt,5,2,"ng-container",0),s["\u0275\u0275pipe"](22,"async"),s["\u0275\u0275template"](23,Ut,1,1,"ng-template",null,17,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()()()}if(2&t){const t=s["\u0275\u0275reference"](9),e=s["\u0275\u0275reference"](15),n=s["\u0275\u0275reference"](24),i=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,12,"dashboard.incidentsAndAlerts."+i.paramName+".title"),": "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](i.number),s["\u0275\u0275advance"](2),s["\u0275\u0275classProp"]("i360-chart-tile-title-description-overflow-container",!i.descriptionExpanded),s["\u0275\u0275property"]("i360OverflowDetector",i.descriptionExpanded&&i.translateService.translate.onLangChange),s["\u0275\u0275advance"](3),s["\u0275\u0275classProp"]("i360-chart-tile-load-more-hidden",!t.overflow&&!i.descriptionExpanded),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",i.descriptionExpanded)("ngIfElse",e),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",i.heatmapAllowed),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngIf",s["\u0275\u0275pipeBind1"](22,14,i.loadedData))("ngIfElse",n)}}const Kt=[[["","description",""]]],Xt=["[description]"];let Jt=(()=>{class t extends T.W{constructor(t,e,n){super(null,t),this.request=t,this.translateService=e,this.router=n,this.heatmapAllowed=!0,this.number="",this.loadedData=this.request.loaded.pipe((0,a.map)(t=>t[this.paramName].data),(0,a.tap)(t=>{t&&0!==t.length?this.number=(0,z.zG)(t.reduce((t,e)=>t+e[1],0)):this.number=""})),this.loaded=this.loadedData.pipe((0,a.filter)(t=>{const e=t!==this.prevData&&!!t&&!!t.length;return this.prevData=t,e})),this.availableValues=w,this.defaultValue=this.availableValues.histogram,this.descriptionExpanded=!1,this.hasCountriesInHeatmapExpr=([t,e])=>""!==t&&e>0,this.delegate=new $.P(this),this.loadedData.pipe((0,a.take)(1)).subscribe(()=>this.prevData=null)}navigate(t){this.router.navigate([],{queryParamsHandling:"merge",queryParams:{[this.paramName]:t}})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](V),s["\u0275\u0275directiveInject"](R.sK),s["\u0275\u0275directiveInject"](o.Router))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-chart-tile"]],inputs:{heatmapAllowed:"heatmapAllowed"},features:[s["\u0275\u0275ProvidersFeature"]([{provide:j.g,useExisting:t}]),s["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:Xt,decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["dataFound",""],[1,"i360-chart-tile-header"],[1,"i360-chart-tile-title-section"],["role","heading","aria-level","2",1,"i360-chart-tile-title"],[1,"i360-chart-tile-number"],[1,"i360-chart-tile-title-description"],[3,"i360OverflowDetector"],["overflowDetector","i360OverflowDetector"],[1,"i360-chart-tile-load-more"],[1,"flexer","align-center",3,"click"],["descriptionNotExpandedTemplate",""],[1,"i360-chart-tile-buttons-section"],[4,"ngIf"],[1,"i360-chart-tile-content-wrapper-2"],[1,"i360-chart-tile-content-wrapper"],[1,"i360-chart-tile-content"],["errorTemplate",""],["svgIcon","read-more",1,"i360-load-more-description-expanded"],[1,"i360-dashboard-link"],["svgIcon","read-more"],["i360-button","",3,"round","primary","click"],["emptyTemplate",""],[1,"i360-chart-tile-no-content"],[1,"i360-chart-tile-no-content-text"],["class","i360-chart-tile-no-content",4,"ngIf"]],template:function(t,e){if(1&t&&(s["\u0275\u0275projectionDef"](Kt),s["\u0275\u0275template"](0,Dt,1,0,"ng-container",0),s["\u0275\u0275pipe"](1,"async"),s["\u0275\u0275template"](2,Ht,25,16,"ng-template",null,1,s["\u0275\u0275templateRefExtractor"])),2&t){const t=s["\u0275\u0275reference"](3);let n;s["\u0275\u0275property"]("ngIf",0===(null==(n=s["\u0275\u0275pipeBind1"](1,2,e.loadedData))?null:n.length))("ngIfElse",t)}},dependencies:[W.I,G.h,k.NgIf,Q.MatIcon,mt,zt,Nt.X$,k.AsyncPipe],styles:["[_nghost-%COMP%] {\n  background-color: #f4f5f7;\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n[_nghost-%COMP%]:empty {\n  display: none;\n}\n.i360-chart-tile-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 23px;\n  margin-bottom: 10px;\n  align-items: flex-start;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-left: 27px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-right: 27px;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-right: 21px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-left: 21px;\n}\n.i360-chart-tile-title-section[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%] {\n  display: flex;\n  flex-shrink: 0;\n  min-width: 165px;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  height: 32px;\n  font-weight: normal;\n  border: 0;\n  min-width: auto;\n  font-size: 11px;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-left: 4px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\n  margin-right: 4px;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-basic-color[_ngcontent-%COMP%] {\n  border: 2px solid #e4e7ec;\n  color: #788896;\n  background-color: #f4f5f7;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-basic-color[_ngcontent-%COMP%]:hover, .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-basic-color[_ngcontent-%COMP%]:active {\n  background-color: #f4f5f7;\n  background-image: none;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-primary-color[_ngcontent-%COMP%] {\n  color: #ffffff;\n  background-color: #4b5c6b;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-primary-color[_ngcontent-%COMP%]:hover, .i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button.i360-primary-color[_ngcontent-%COMP%]:active {\n  background-color: #4b5c6b;\n}\n.i360-chart-tile-buttons-section[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   .i360-button-root[_ngcontent-%COMP%] {\n  margin-left: 10px;\n  margin-right: 10px;\n}\n.i360-chart-tile-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  line-height: 1.75;\n  font-weight: bold;\n  word-break: break-word;\n}\n.i360-chart-tile-number[_ngcontent-%COMP%] {\n  font-weight: normal;\n}\n.i360-chart-tile-title-description[_ngcontent-%COMP%] {\n  font-size: 11px;\n  margin-top: 5px;\n  color: #777777;\n  font-weight: 600;\n  line-height: 1.64;\n}\n.i360-chart-tile-title-description-overflow-container[_ngcontent-%COMP%] {\n  height: 32px;\n  overflow: hidden;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n.i360-chart-tile-load-more[_ngcontent-%COMP%] {\n  display: flex;\n  align-items: center;\n  font-size: 11px;\n  font-weight: 600;\n  color: #777777;\n}\n.i360-chart-tile-load-more[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  width: 14px;\n  height: 14px;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-load-more[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-load-more[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-right: 4px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-load-more[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-load-more[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-left: 4px;\n}\n.i360-chart-tile-load-more.i360-chart-tile-load-more-hidden[_ngcontent-%COMP%] {\n  visibility: hidden;\n}\n.i360-chart-tile-load-more[_ngcontent-%COMP%]   .i360-load-more-description-expanded[_ngcontent-%COMP%] {\n  transform: rotate(-90deg);\n}\n.i360-chart-tile-content-wrapper[_ngcontent-%COMP%] {\n  padding-bottom: 58%;\n  height: 0;\n  position: relative;\n}\n.i360-chart-tile-content[_ngcontent-%COMP%] {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%] {\n  left: 20px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%] {\n  right: 20px;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%] {\n  right: 0;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-content[_ngcontent-%COMP%] {\n  left: 0;\n}\n.i360-chart-tile-no-content[_ngcontent-%COMP%] {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.i360-chart-tile-no-content-text[_ngcontent-%COMP%] {\n  margin-top: -73px;\n  font-size: 11px;\n  font-weight: 600;\n  color: #777777;\n}"]}),t})();var te=n(56702),ee=n(39749);let ne=(()=>{class t{constructor(t,e){this.element=t,this.translate=e,this.data=[],this.percents=[],this.spam="",this.ham="",this.chartInitialized=!1,this.pendingUpdate=!1,this.langChangeSubscription=this.translate.translate.onLangChange.subscribe(()=>{this.update()}),this.resizeSubscription=(0,a.fromEvent)(window,"resize").pipe((0,a.debounceTime)(400)).subscribe(()=>{this.chart&&(this.adjustCanvasSize(),this.chart.resize())}),this.updateTranslation(),H.Chart.register(...H.registerables)}ngAfterViewInit(){setTimeout(()=>{this.data&&this.data.length>0&&!this.chartInitialized&&this.initializeChart()},0)}adjustCanvasSize(){const t=this.element.nativeElement,e=t.parentElement;if(e&&e.offsetWidth>0){t.width=e.offsetWidth;let n=Math.floor(t.width/1.6666666);(!Number.isFinite(n)||n<=0)&&(n=t.height||265),t.height=Math.max(265,n)}}initializeChart(){if(this.chartInitialized||this.chart)return;this.adjustCanvasSize();let t=this.element.nativeElement.getContext("2d"),e={type:"doughnut",data:this.getData(),options:{aspectRatio:1.6666666,maintainAspectRatio:!1,elements:{arc:{borderWidth:.5}},cutout:"65%",plugins:{legend:{labels:{usePointStyle:!0,fontColor:"#000"}},tooltips:{callbacks:{label:(t,e)=>this.getLabels()[t.index]}},tooltip:{usePointStyle:!0,callbacks:{labelPointStyle:function(t){return{pointStyle:"circle",rotation:0}}},boxPadding:3,caretSize:0,cornerRadius:3}}},plugins:[{id:"legendMargin",beforeInit:(t,e,n)=>{const i=t.legend.fit;t.legend.fit=function(){return i.bind(t.legend)(),this.height+=25}}}]};this.chart=new H.Chart(t,e),this.chartInitialized=!0,this.pendingUpdate&&(this.pendingUpdate=!1,this.update()),setTimeout(()=>{this.chart&&(this.adjustCanvasSize(),this.chart.resize())},100)}ngOnChanges(t){if(this.data){if(this.data=t.data?.currentValue||this.data,!this.chartInitialized&&this.data.length>0)return this.pendingUpdate=!0,void setTimeout(()=>{!this.chartInitialized&&this.data.length>0&&this.initializeChart()},100);this.chartInitialized&&this.update()}}update(){var t=this;return(0,q.Z)(function*(){yield t.updateTranslation(),t.chart&&(t.chart.data=t.getData(),t.chart.update())})()}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.langChangeSubscription.unsubscribe(),this.resizeSubscription.unsubscribe(),this.chartInitialized=!1}getData(){return{labels:this.getLabels(),datasets:[{backgroundColor:["#4EB675","#D95140"],data:this.data}]}}getLabels(){return[`${this.ham}: ${this.data[0]} (${this.percents[0]}%)`,`${this.spam}: ${this.data[1]} (${this.percents[1]}%)`]}updateTranslation(){var t=this;return(0,q.Z)(function*(){t.spam=yield t.translate.t("dashboard.incidentsAndAlerts.spam_ham.spam"),t.ham=yield t.translate.t("dashboard.incidentsAndAlerts.spam_ham.ham")})()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](s.ElementRef),s["\u0275\u0275directiveInject"](R.sK))},t.\u0275dir=s["\u0275\u0275defineDirective"]({type:t,selectors:[["canvas","baseDoughnut",""]],inputs:{data:"data",percents:"percents"},features:[s["\u0275\u0275NgOnChangesFeature"]]}),t})(),ie=(()=>{class t{constructor(t){this.dataLoader=t,this.onLoaded=a.Subscription.EMPTY}ngAfterContentInit(){this.onLoaded=this.dataLoader.loaded.subscribe(t=>this.load(t))}load(t){var e=this;return(0,q.Z)(function*(){e.data=[(t[0][0]||[]).reduce((t,e)=>Number(t)+Number(e[1]),0),(t[0][1]||[]).reduce((t,e)=>Number(t)+Number(e[1]),0)],e.percents=[(e.data[0]/(e.data[0]+e.data[1])*100).toFixed(1),(e.data[1]/(e.data[0]+e.data[1])*100).toFixed(1)]})()}ngOnDestroy(){this.onLoaded.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](j.g))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-doughnut"]],decls:2,vars:2,consts:[["baseDoughnut","",3,"data","percents"]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275element"](1,"canvas",0),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("data",e.data)("percents",e.percents))},dependencies:[ne],encapsulation:2}),t})();function ae(t,e){1&t&&s["\u0275\u0275elementContainer"](0)}function re(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",2)(1,"div",3)(2,"div",4),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",5)(6,"div"),s["\u0275\u0275text"](7),s["\u0275\u0275pipe"](8,"translate"),s["\u0275\u0275elementEnd"]()()()(),s["\u0275\u0275elementStart"](9,"div",6)(10,"div",7)(11,"div",8),s["\u0275\u0275element"](12,"i360-doughnut"),s["\u0275\u0275elementEnd"]()()()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,2,"dashboard.incidentsAndAlerts."+t.paramName+".title")," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](8,4,"dashboard.incidentsAndAlerts."+t.paramName+".description"))}}let oe=(()=>{class t extends T.W{constructor(t,e){super(null,t),this.request=t,this.translateService=e,this.loadedData=this.request.loaded.pipe((0,a.filter)(t=>void 0!==t[this.paramName]),(0,a.map)(t=>t[this.paramName].data)),this.loaded=this.loadedData.pipe((0,a.filter)(t=>{const e=t!==this.prevData&&!!t&&!!t.length;return this.prevData=t,e})),this.availableValues=w,this.defaultValue=this.availableValues.histogram,this.loadedData.pipe((0,a.take)(1)).subscribe(()=>this.prevData=null)}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](V),s["\u0275\u0275directiveInject"](R.sK))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-doughnut-tile"]],inputs:{paramName:"paramName"},features:[s["\u0275\u0275ProvidersFeature"]([{provide:j.g,useExisting:t}]),s["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["dataFound",""],[1,"i360-chart-tile-header"],[1,"i360-chart-tile-title-section"],["role","heading","aria-level","2",1,"i360-chart-tile-title"],[1,"i360-chart-tile-title-description"],[1,"i360-chart-tile-content-wrapper-2"],[1,"i360-chart-tile-content-wrapper"],[1,"i360-chart-tile-content"]],template:function(t,e){if(1&t&&(s["\u0275\u0275template"](0,ae,1,0,"ng-container",0),s["\u0275\u0275pipe"](1,"async"),s["\u0275\u0275template"](2,re,13,6,"ng-template",null,1,s["\u0275\u0275templateRefExtractor"])),2&t){const t=s["\u0275\u0275reference"](3);let n;s["\u0275\u0275property"]("ngIf",0===(null==(n=s["\u0275\u0275pipeBind1"](1,2,e.loadedData))?null:n.length))("ngIfElse",t)}},dependencies:[k.NgIf,ie,Nt.X$,k.AsyncPipe],styles:["[_nghost-%COMP%] {\n  background-color: #f4f5f7;\n  border-radius: 6px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n}\n[_nghost-%COMP%]:empty {\n  display: none;\n}\n.i360-chart-tile-header[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 23px;\n  margin-bottom: 10px;\n  align-items: flex-start;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-left: 27px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-right: 27px;\n}\n.ltr[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-right: 21px;\n}\n.rtl[_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-chart-tile-header[_ngcontent-%COMP%] {\n  margin-left: 21px;\n}\n.i360-chart-tile-title-section[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n}\n.i360-chart-tile-title[_ngcontent-%COMP%] {\n  font-size: 16px;\n  line-height: 1.75;\n  font-weight: bold;\n  word-break: break-word;\n}\n.i360-chart-tile-title-description[_ngcontent-%COMP%] {\n  font-size: 11px;\n  margin-top: 5px;\n  color: #777777;\n  font-weight: 600;\n  line-height: 1.64;\n}\n.i360-chart-tile-content-wrapper[_ngcontent-%COMP%] {\n  padding-bottom: 20px;\n  position: relative;\n}"]}),t})();var se=n(35844),le=n(16379),de=n(29639),ce=n(85290),pe=n(29782),he=n(86474),me=n(33389),ue=n(47953),ge=n(5081);let fe=(()=>{class t extends ue.j{constructor(t){super(),this.server=t}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](me.MAT_DIALOG_DATA))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["ng-component"]],features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:9,vars:7,consts:[["modal-title",""],["modal-body",""]],template:function(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"i360-modal-content"),s["\u0275\u0275elementContainerStart"](1,0),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](4,1),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"translate"),s["\u0275\u0275elementStart"](7,"div"),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,3,"dashboard.serverIdWidget.deleteModal.title")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](6,5,"dashboard.serverIdWidget.deleteModal.body")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",e.server," "))},dependencies:[ge.E,Nt.X$],encapsulation:2}),t})();var ve=n(34322),xe=n(49818),be=n(94564),Ce=n(26881),ye=n(15145),we=n(67765),Me=n(50872),Se=n(53530),_e=n(62471),Ie=n(66161),Oe=n(84568),Pe=n(73281);let Ee=(()=>{class t extends ue.j{constructor(t,e,n){super(),this.formBuilder=t,this.appState=e,this.data=n,this.form=this.formBuilder.group({ids:this.formBuilder.control(this.data.predefinedValue,[ve.M.listOfServerId,({value:t})=>{if(t&&this.data.invalidIds.length&&this.data.invalidIds.some(e=>t.includes(e)))return{listOfServerId:{ids:this.data.invalidIds.filter(e=>t.includes(e))}}}])}),this.data.invalidIds.length&&this.form.markAsDirty({children:!0})}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](xe.I),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](me.MAT_DIALOG_DATA))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["add-server-id-modal"]],features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:46,vars:48,consts:[[3,"confirmDisabledAlways","confirmNote"],["modal-title",""],["modal-body",""],[3,"formGroup"],[1,"i360-add-server-id-modal-description"],["id","add-server-id-input"],["cdkFocusInitial","","commaSeparatedInput","","matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","2","cdkAutosizeMaxRows","7","formControlName","ids"],["matSuffix","","svgIcon","icon-question",3,"matTooltip"],[1,"i360-add-server-id-modal-note"],["icon","icon-info",3,"theme"],["message",""],[1,"i360-paragraph"],["i360-button","","role","presentation",1,"i360-shadow-button"],["svgIcon","icon-key"],[1,"i360-file"],["href","https://docs.imunify360.com/dashboard/#dashboard","target","_blank",1,"i360-dashboard-link"]],template:function(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"i360-modal-content",0),s["\u0275\u0275pipe"](1,"translate"),s["\u0275\u0275elementContainerStart"](2,1),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementContainerStart"](5,2),s["\u0275\u0275elementStart"](6,"form",3)(7,"div",4),s["\u0275\u0275text"](8),s["\u0275\u0275pipe"](9,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"cl-text-input",5)(11,"textarea",6),s["\u0275\u0275text"](12,"                "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"mat-label"),s["\u0275\u0275text"](14),s["\u0275\u0275pipe"](15,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](16,"mat-icon",7),s["\u0275\u0275pipe"](17,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"div",8),s["\u0275\u0275text"](19),s["\u0275\u0275pipe"](20,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"i360-message",9,10)(23,"div")(24,"div",11),s["\u0275\u0275text"](25),s["\u0275\u0275pipe"](26,"translateCut"),s["\u0275\u0275pipe"](27,"translate"),s["\u0275\u0275elementStart"](28,"div",12),s["\u0275\u0275element"](29,"mat-icon",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](30),s["\u0275\u0275pipe"](31,"translateCut"),s["\u0275\u0275pipe"](32,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](33,"div",11),s["\u0275\u0275text"](34),s["\u0275\u0275pipe"](35,"translateCut"),s["\u0275\u0275pipe"](36,"translate"),s["\u0275\u0275elementStart"](37,"span",14),s["\u0275\u0275text"](38,"/var/imunify360/license.json"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](39),s["\u0275\u0275pipe"](40,"translateCut"),s["\u0275\u0275pipe"](41,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](42,"div",11)(43,"a",15),s["\u0275\u0275text"](44),s["\u0275\u0275pipe"](45,"translate"),s["\u0275\u0275elementEnd"]()()()()(),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275reference"](22);s["\u0275\u0275property"]("confirmDisabledAlways",e.appState.demo)("confirmNote",s["\u0275\u0275pipeBind1"](1,14,"dashboard.serverIdWidget.addModal.confirmNote")),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,16,"dashboard.serverIdWidget.addModal.title")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("formGroup",e.form),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](9,18,"dashboard.serverIdWidget.addModal.description")," "),s["\u0275\u0275advance"](6),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](15,20,"dashboard.serverIdWidget.addModal.placeholder")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("matTooltip",s["\u0275\u0275pipeBind1"](17,22,"dashboard.serverIdWidget.addModal.nearInputTooltip")),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](20,24,"dashboard.serverIdWidget.addModal.note")),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("theme",t.Theme.white),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](26,26,s["\u0275\u0275pipeBind1"](27,29,"dashboard.serverIdWidget.addModal.description2"),0)," "),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](31,31,s["\u0275\u0275pipeBind1"](32,34,"dashboard.serverIdWidget.addModal.description2"),1)," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](35,36,s["\u0275\u0275pipeBind1"](36,39,"dashboard.serverIdWidget.addModal.description3"),0)," "),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](40,41,s["\u0275\u0275pipeBind1"](41,44,"dashboard.serverIdWidget.addModal.description3"),1)," "),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](45,46,"dashboard.serverIdWidget.addModal.description4")," ")}},dependencies:[W.I,be.MatLabel,be.MatSuffix,ce.MatTooltip,Q.MatIcon,Ce.CdkTextareaAutosize,ye.MatInput,we["\u0275NgNoValidate"],we.DefaultValueAccessor,we.NgControlStatus,we.NgControlStatusGroup,we.FormGroupDirective,we.FormControlName,Me.O,Se.J,ge.E,_e.q,Ie.t,Oe.S,Pe.v,Nt.X$],styles:[".i360-add-server-id-modal-note[_ngcontent-%COMP%] {\n  margin-top: 10px;\n  font-size: 11px;\n  color: #818181;\n  margin-bottom: 40px;\n}\n\n.i360-add-server-id-modal-description[_ngcontent-%COMP%] {\n  font-size: 13px;\n  color: #1d1d1d;\n  margin-bottom: 40px;\n}\n\n.i360-paragraph[_ngcontent-%COMP%] {\n  margin-bottom: 10px;\n}\n\n.i360-paragraph[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 0;\n}\n\n.i360-file[_ngcontent-%COMP%] {\n  color: #788896;\n}\n\n.i360-shadow-button[_ngcontent-%COMP%] {\n  transform: scale(0.5) translatey(14px);\n  margin-left: -10px;\n  margin-right: -10px;\n  margin-top: -20px;\n  pointer-events: none;\n  display: inline-block;\n}\n\ncl-text-input[_ngcontent-%COMP%] {\n  width: 100%;\n}"]}),t})();var ke=n(53624),Ae=n(73842),Be=n(26195),Te=n(92962),$e=n(95471),je=n(45271),ze=n(72418);const Ne=["input"];function De(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"mat-icon"),s["\u0275\u0275text"](1,"dns"),s["\u0275\u0275elementEnd"]())}const Fe=function(t){return{severity:t}};function Le(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"mat-option",16),s["\u0275\u0275template"](1,De,2,0,"mat-icon",17),s["\u0275\u0275pipe"](2,"async"),s["\u0275\u0275elementStart"](3,"div",18)(4,"div",19),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div"),s["\u0275\u0275text"](7),s["\u0275\u0275pipe"](8,"translate"),s["\u0275\u0275elementEnd"]()()()),2&t){const t=e.$implicit,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275classProp"]("i360-active",t.server_id===n.widget.value),s["\u0275\u0275property"]("value",t.id),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.server_id===s["\u0275\u0275pipeBind1"](2,9,n.licenseState.license).id),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](t.id),s["\u0275\u0275advance"](1),s["\u0275\u0275classMapInterpolate1"]("i360-server-id-option-status i360-severity-text-",t.severity,""),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](8,11,"dashboard.serverIdWidget.serverStatus",s["\u0275\u0275pureFunction1"](14,Fe,t.severity))," ")}}function Ve(t,e){const n=t.find(t=>t.server_id===e);return n||null}class Re{constructor(t,e,n,i,r,o,s,l){this.dashboardService=t,this.widget=e,this.licenseState=n,this.filtersService=i,this.modalService=r,this.groupNotifications=o,this.notifications=s,this.formBuilder=l,this.delegatePriority=3,this.serverIdEntries=new a.Subject,this.cached=this.serverIdEntries.pipe((0,pe.F)(1/0)),this.form=this.formBuilder.group({domain:this.formBuilder.control("",void 0,[({value:t})=>this.cached.pipe((0,a.map)(e=>e.some(e=>e.id===t)?null:{required:{what:"domain"}}),(0,a.take)(1))])}),this.inputFocused=new a.Subject,this.filteredDomains=this.form.controls.domain.valueChanges.pipe((0,a.startWith)(""),(0,a.debounceTime)(100),(0,a.mergeWith)(this.inputFocused),(0,a.switchMap)(t=>this.cached.pipe((0,a.map)(e=>e.filter(e=>e.id.includes(t)))))),this.destroyed=new a.Subject,this.poorServersCount=0,e.delegate=this,e.paramName="server_id",(0,a.concat)(this.licenseState.license.pipe((0,a.first)(t=>!!t.id),(0,a.tap)(t=>{this.widget.defaultValue=t.id,this.widget.setValue(this.widget.defaultValue)})),this.widget.valueChanged).pipe((0,a.switchMap)(()=>this.cached.pipe((0,a.first)(t=>t&&t.length>0)))).subscribe(t=>{const e=Ve(t,this.widget.value);null!==e?(this.currentActiveItem=e,this.form.setValue({domain:this.currentActiveItem.id})):he.Tb(new Error("Probably server_id of current server is not present in the list"))}),this.getServerIds().subscribe()}ngAfterViewInit(){this.widget.valueChanged.pipe((0,a.takeUntil)(this.destroyed)).subscribe(t=>{t&&this.filtersService.setParam(this.widget.paramName,this.widget.value)})}getServerIds(t){return this.dashboardService.getServerIds(t).pipe((0,a.catchError)(t=>{throw this.notifications.error("notifications.internalError"),t}),(0,a.tap)(t=>{this.serverIdEntries.next(t),this.poorServersCount=t.filter(t=>t.severity===S.poor).length}),(0,a.takeUntil)(this.destroyed))}onSubmit(){this.cached.pipe((0,a.take)(1)).subscribe(t=>{document.activeElement===this.input.nativeElement&&this.input.nativeElement.blur();const e=t.find(t=>t.id===this.form.value.domain);this.widget.setValue(e.server_id,!0)})}deleteServerId(){var t=this;const e=this.widget.value;this.cached.pipe((0,a.take)(1)).subscribe(function(){var n=(0,q.Z)(function*(n){const i=Ve(n,e).id;(yield t.openDeleteServerConfirm(i))&&(yield t.deleteServer(e))});return function(t){return n.apply(this,arguments)}}())}openDeleteServerConfirm(t){return this.modalService.open(fe,{data:t})}deleteServer(t){var e=this;return(0,q.Z)(function*(){yield(0,a.firstValueFrom)(e.dashboardService.deleteServerId(t).pipe((0,a.tap)(t=>{e.getServerIds((0,a.of)({result:t.result})).subscribe(()=>{e.widget.setValue(t.result[0].server_id,!0)})}),(0,a.catchError)(t=>(e.notifications.error("notifications.internalError"),(0,a.throwError)(()=>t)))),{defaultValue:void 0})})()}addServerIds(){var t=this;return(0,q.Z)(function*(e=[],n=[]){const i=yield t.modalService.open(Ee,{data:{predefinedValue:e,invalidIds:n}});if(!1!==i){const e=i.ids;yield t.addServer(e)}}).apply(this,arguments)}addServer(t){var e=this;return(0,q.Z)(function*(){yield(0,a.firstValueFrom)(e.dashboardService.addServerId(t).pipe((0,a.tap)(n=>{const i=n.result,r=n.errors.map(t=>t.server_id);e.groupNotifications.forAction("add-server-ids",{succeeded:i.filter(e=>t.includes(e.server_id)).map(t=>t.nodename||t.ip),failed:r}),e.getServerIds((0,a.of)({result:i})).subscribe(()=>{n.errors.length?e.addServerIds(r,r):e.widget.setValue(t[t.length-1],!0)})}),(0,a.catchError)(n=>401===n.status?(e.notifications.error("dashboard.serverIdWidget.addModal.authenticationError"),e.addServerIds(t),(0,a.of)(void 0)):(e.notifications.error("notifications.internalError"),(0,a.throwError)(()=>n)))),{defaultValue:void 0})})()}ngOnDestroy(){this.destroyed.next()}}Re.\u0275fac=function(t){return new(t||Re)(s["\u0275\u0275directiveInject"](I),s["\u0275\u0275directiveInject"](T.W),s["\u0275\u0275directiveInject"](d.u),s["\u0275\u0275directiveInject"](ke.qX),s["\u0275\u0275directiveInject"](Ae.Z),s["\u0275\u0275directiveInject"](Be.s),s["\u0275\u0275directiveInject"](Te.T),s["\u0275\u0275directiveInject"](xe.I))},Re.\u0275cmp=s["\u0275\u0275defineComponent"]({type:Re,selectors:[["i360-server-id-widget"]],viewQuery:function(t,e){if(1&t&&s["\u0275\u0275viewQuery"](Ne,7,s.ElementRef),2&t){let t;s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.input=t.first)}},decls:31,vars:31,consts:[[1,"i360-bulk-actions-v2",3,"formGroup","i360Submit"],["matAutocompleteOrigin","",3,"i360Errors"],["origin","matAutocompleteOrigin"],["matInput","","id","search-server-id-input","formControlName","domain",3,"matAutocompleteConnectedTo","matAutocomplete","focus"],["input",""],["matSuffix","",1,"i360-expander-icon"],[3,"optionSelected"],["auto","matAutocomplete"],["class","i360-server-id-option",3,"i360-active","value",4,"ngFor","ngForOf"],["i360-button","",3,"i360CopyOnClick","copyOnClickTooltip","matTooltip"],["tooltip","matTooltip"],["svgIcon","icon-key","matPrefix",""],["i360-button","","id","delete-server-id-button",3,"disabled","matTooltip","click"],["svgIcon","icon-delete","matPrefix",""],["i360-button","","id","add-server-id-button",3,"primary","click"],["matPrefix",""],[1,"i360-server-id-option",3,"value"],[4,"ngIf"],[1,"i360-server-id-option-data"],[1,"i360-server-id-option-domain"]],template:function(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"form",0),s["\u0275\u0275listener"]("i360Submit",function(){return e.onSubmit()}),s["\u0275\u0275elementStart"](1,"cl-text-input",1,2)(3,"input",3,4),s["\u0275\u0275listener"]("focus",function(){return e.inputFocused.next("")}),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"mat-label"),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"mat-icon",5),s["\u0275\u0275text"](9,"play_arrow"),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275elementStart"](10,"mat-autocomplete",6,7),s["\u0275\u0275listener"]("optionSelected",function(){return e.onSubmit()}),s["\u0275\u0275template"](12,Le,9,16,"mat-option",8),s["\u0275\u0275pipe"](13,"async"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"button",9,10),s["\u0275\u0275pipe"](16,"translate"),s["\u0275\u0275element"](17,"mat-icon",11),s["\u0275\u0275text"](18),s["\u0275\u0275pipe"](19,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"button",12),s["\u0275\u0275listener"]("click",function(){return e.deleteServerId()}),s["\u0275\u0275pipe"](21,"async"),s["\u0275\u0275pipe"](22,"translate"),s["\u0275\u0275element"](23,"mat-icon",13),s["\u0275\u0275text"](24),s["\u0275\u0275pipe"](25,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](26,"button",14),s["\u0275\u0275listener"]("click",function(){return e.addServerIds()}),s["\u0275\u0275elementStart"](27,"mat-icon",15),s["\u0275\u0275text"](28,"add_circle"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](29),s["\u0275\u0275pipe"](30,"translate"),s["\u0275\u0275elementEnd"]()()),2&t){const t=s["\u0275\u0275reference"](2),n=s["\u0275\u0275reference"](11),i=s["\u0275\u0275reference"](15);let a;s["\u0275\u0275property"]("formGroup",e.form),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("i360Errors",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("matAutocompleteConnectedTo",t)("matAutocomplete",n),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](7,15,"dashboard.serverIdWidget.placeholder")),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngForOf",s["\u0275\u0275pipeBind1"](13,17,e.filteredDomains)),s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("matTooltip",s["\u0275\u0275pipeBind1"](16,19,"dashboard.serverIdWidget.keyButtonTooltip")),s["\u0275\u0275property"]("i360CopyOnClick",e.widget.value)("copyOnClickTooltip",i),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](19,21,"dashboard.serverIdWidget.keyButtonText")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275propertyInterpolate"]("matTooltip",s["\u0275\u0275pipeBind1"](22,25,"dashboard.serverIdWidget.trashButtonTooltip")),s["\u0275\u0275property"]("disabled",e.widget.value===(null==(a=s["\u0275\u0275pipeBind1"](21,23,e.licenseState.license))?null:a.id)),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](25,27,"dashboard.serverIdWidget.trashButtonText")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("primary",!0),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](30,29,"dashboard.serverIdWidget.addServerButtonText")," ")}},dependencies:[W.I,be.MatLabel,be.MatPrefix,be.MatSuffix,k.NgForOf,k.NgIf,ce.MatTooltip,Q.MatIcon,ye.MatInput,$e.MatAutocomplete,$e.MatAutocompleteTrigger,$e.MatAutocompleteOrigin,je.MatOption,we["\u0275NgNoValidate"],we.DefaultValueAccessor,we.NgControlStatus,we.NgControlStatusGroup,we.FormGroupDirective,we.FormControlName,Me.O,Se.J,ze.f,Ie.t,Nt.X$,k.AsyncPipe],styles:['.i360-app #search-server-id-input {\n  width: 90%;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.i360-app .i360-bulk-actions-v2 {\n  display: flex;\n  flex-wrap: wrap;\n}\n.ltr .i360-app .i360-bulk-actions-v2 {\n  margin-left: 20px;\n}\n.rtl .i360-app .i360-bulk-actions-v2 {\n  margin-right: 20px;\n}\n.ltr .i360-app .i360-bulk-actions-v2 > * {\n  margin-right: 6px;\n}\n.rtl .i360-app .i360-bulk-actions-v2 > * {\n  margin-left: 6px;\n}\n.i360-app .i360-bulk-actions-v2 .mat-form-field-flex::after {\n  content: " ";\n  position: absolute;\n  right: 15px;\n  top: 18px;\n  width: 0;\n  height: 0;\n  border-left: 3.5px solid transparent;\n  border-right: 3.5px solid transparent;\n  border-top: 5px solid #797e84;\n}\n.i360-app .i360-server-id-option {\n  font: 12px "Open Sans", Helvetica, sans-serif;\n  line-height: 37px;\n  height: 37px;\n  color: #535353;\n  cursor: pointer;\n  min-width: 170px;\n}\n.ltr .i360-app .i360-server-id-option {\n  padding-left: 50px;\n}\n.rtl .i360-app .i360-server-id-option {\n  padding-right: 50px;\n}\n.ltr .i360-app .i360-server-id-option {\n  padding-right: 20px;\n}\n.rtl .i360-app .i360-server-id-option {\n  padding-left: 20px;\n}\n.i360-app .i360-server-id-option:hover {\n  background-color: #f8f9fb;\n}\n.i360-app .i360-server-id-option:first-child {\n  margin-top: 18px;\n}\n.i360-app .i360-server-id-option:last-child {\n  margin-bottom: 18px;\n}\n.i360-app .i360-server-id-option mat-icon {\n  position: absolute;\n  line-height: 22px !important;\n  left: 20px;\n  font-size: 20px;\n  visibility: hidden;\n}\n.i360-app .i360-server-id-option.mat-selected:not(.mat-option-multiple):not(.mat-option-disabled):not(.some) {\n  background-color: white;\n}\n.i360-app .i360-server-id-option.mat-active span {\n  font-weight: bold;\n}\n.i360-app .i360-server-id-option.mat-active mat-icon {\n  visibility: visible;\n}\n.i360-app .i360-server-id-option.mat-active:hover {\n  background-color: #f8f9fb;\n}\n.i360-app .i360-server-id-option .i360-server-id-option-data {\n  line-height: normal;\n}\n.i360-app .i360-server-id-option .i360-server-id-option-domain {\n  font-size: 12px;\n  color: #535353;\n}\n.i360-app .i360-server-id-option.i360-active .i360-server-id-option-domain {\n  font-weight: bold;\n}\n.i360-app .i360-server-id-option .i360-server-id-option-status {\n  font-size: 10px;\n  font-weight: 600;\n}\n.i360-app .i360-server-id-option .mat-icon {\n  visibility: visible;\n  color: #535353;\n  line-height: 34px;\n}\n.i360-app cl-text-input {\n  width: 209px;\n}\n.i360-app cl-text-input .cl-field-outline-label .cl-field-outline-label-text label mat-label {\n  line-height: 18px !important;\n}'],encapsulation:2}),(0,ut.gn)([It.U],Re.prototype,"deleteServer",null),(0,ut.gn)([It.U],Re.prototype,"addServer",null);const We=function(t){return{count:t}};function Ge(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div")(1,"div",13),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"](2);s["\u0275\u0275classMapInterpolate1"]("i360-issues-count i360-severity-text-",t.item.recommendations.poor.length?t.ServerSeverity.poor:t.ServerSeverity.medium,""),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](t.issuesCount),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](4,5,"dashboard.recommendations.status.issuesCount",s["\u0275\u0275pureFunction1"](8,We,t.issuesCount))," ")}}function Qe(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",14),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275element"](3,"mat-icon",15),s["\u0275\u0275elementEnd"]()),2&t&&(s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](2,1,"dashboard.recommendations.lists.no")," "))}function qe(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",1)(1,"div",2)(2,"div",3),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",4),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",5)(8,"div"),s["\u0275\u0275template"](9,Ge,5,10,"div",6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"div",7)(11,"div",8),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div"),s["\u0275\u0275text"](15),s["\u0275\u0275pipe"](16,"translate"),s["\u0275\u0275elementEnd"]()()()(),s["\u0275\u0275elementStart"](17,"div",2)(18,"div",9)(19,"div",3),s["\u0275\u0275text"](20),s["\u0275\u0275pipe"](21,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",10)(23,"mat-icon"),s["\u0275\u0275text"](24,"watch_later"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](25),s["\u0275\u0275pipe"](26,"translate"),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275template"](27,Qe,4,3,"div",11),s["\u0275\u0275element"](28,"i360-recommendations-list",12)(29,"i360-recommendations-list",12)(30,"i360-recommendations-list",12),s["\u0275\u0275elementEnd"]()()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,17,"dashboard.recommendations.status.title")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.item.id," "),s["\u0275\u0275advance"](2),s["\u0275\u0275classMapInterpolate1"]("i360-recommendations-status-indicator-circle i360-severity-border-",t.item.severity,""),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",t.issuesCount),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](13,19,"dashboard.recommendations.status."+t.item.severity+".title")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275classMapInterpolate1"]("i360-recommendations-status-indicator-description-subtitle i360-severity-text-",t.item.severity,""),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](16,21,"dashboard.recommendations.status."+t.item.severity+".subtitle")," "),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind1"](21,23,"dashboard.recommendations.lists.title")),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](26,25,"dashboard.recommendations.lists.updateInterval")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.noRecommendations),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("severity",t.ServerSeverity.poor),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("severity",t.ServerSeverity.medium),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("severity",t.ServerSeverity.good)}}let Ze=(()=>{class t{constructor(){this.ServerSeverity=S}ngOnChanges(){this.item&&(this.noRecommendations=!this.item.recommendations.good.length&&!this.item.recommendations.medium.length&&!this.item.recommendations.poor.length,this.issuesCount=this.item.recommendations.poor.length+this.item.recommendations.medium.length)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-recommendations"]],inputs:{item:"item"},features:[s["\u0275\u0275NgOnChangesFeature"]],decls:1,vars:1,consts:[["class","i360-recommendations",4,"ngIf"],[1,"i360-recommendations"],[1,"i360-recommendations-section"],["role","heading","aria-level","3",1,"i360-recommendations-title"],[1,"i360-recommendations-status-domain"],[1,"i360-recommendations-status-indicator"],[3,"class",4,"ngIf"],[1,"i360-recommendations-status-indicator-description"],["role","heading","aria-level","4",1,"i360-recommendations-status-indicator-description-title"],[1,"i360-recommendations-lists-title-section"],[1,"i360-recommendations-lists-interval"],["class","i360-recommendations-no",4,"ngIf"],[3,"severity"],[1,"i360-count"],[1,"i360-recommendations-no"],["svgIcon","undraw-server-down"]],template:function(t,e){1&t&&s["\u0275\u0275template"](0,qe,31,27,"div",0),2&t&&s["\u0275\u0275property"]("ngIf",e.item)},styles:[".i360-recommendations[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  border-radius: 6px;\n  background-color: #f4f5f7;\n  margin-top: 23px;\n  margin-bottom: 52px;\n}\n\n.i360-recommendations-lists-title-section[_ngcontent-%COMP%] {\n  display: flex;\n  margin-bottom: 19px;\n  align-items: center;\n}\n\n.i360-recommendations-lists-interval[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #788896;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n}\n\n.ltr[_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%] {\n  margin-left: 20px;\n}\n\n.rtl[_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%] {\n  margin-right: 20px;\n}\n\n.i360-recommendations-lists-interval[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  color: #ffa83d;\n}\n\n.ltr[_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-right: 8px;\n}\n\n.rtl[_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-recommendations-lists-interval[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-left: 8px;\n}\n\n.i360-recommendations-title[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  color: #797e84;\n}\n\n.i360-recommendations-title.i360-recommendations-lists[_ngcontent-%COMP%] {\n  margin-bottom: 20px;\n}\n\n.i360-recommendations-status-domain[_ngcontent-%COMP%] {\n  color: #1d1d1d;\n  font-size: 13px;\n  font-weight: bold;\n  margin-top: 7px;\n}\n\n.i360-recommendations-section[_ngcontent-%COMP%] {\n  padding: 25px 34px;\n  flex-grow: 1;\n}\n\n.i360-recommendations-section[_ngcontent-%COMP%]:first-child {\n  flex-basis: 40%;\n}\n\n.i360-recommendations-section[_ngcontent-%COMP%]:last-child {\n  flex-basis: 60%;\n}\n\n.i360-recommendations-status-indicator[_ngcontent-%COMP%] {\n  margin-top: 34px;\n  margin-bottom: 34px;\n  display: flex;\n}\n\n.i360-recommendations-status-indicator-circle[_ngcontent-%COMP%] {\n  min-width: 150px;\n  min-height: 150px;\n  border-style: solid;\n  border-width: 9px;\n  border-radius: 50%;\n}\n\n.ltr[_nghost-%COMP%]   .i360-recommendations-status-indicator-circle[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-recommendations-status-indicator-circle[_ngcontent-%COMP%] {\n  margin-right: 27px;\n}\n\n.rtl[_nghost-%COMP%]   .i360-recommendations-status-indicator-circle[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-recommendations-status-indicator-circle[_ngcontent-%COMP%] {\n  margin-left: 27px;\n}\n\n.i360-recommendations-status-indicator-circle[_ngcontent-%COMP%]   .i360-issues-count[_ngcontent-%COMP%] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 13px;\n  font-weight: bold;\n}\n\n.i360-recommendations-status-indicator-circle[_ngcontent-%COMP%]   .i360-issues-count[_ngcontent-%COMP%]   .i360-count[_ngcontent-%COMP%] {\n  margin-top: 29px;\n  margin-bottom: -9px;\n  font-size: 40px;\n}\n\n.i360-recommendations-status-indicator-description[_ngcontent-%COMP%] {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\n.i360-recommendations-status-indicator-description-title[_ngcontent-%COMP%] {\n  font-size: 30px;\n  font-weight: bold;\n  color: #1d1d1d;\n  margin-top: -10px;\n  white-space: nowrap;\n}\n\n.i360-recommendations-status-indicator-description-subtitle[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: bold;\n  white-space: nowrap;\n}\n\n.i360-recommendations-no[_ngcontent-%COMP%] {\n  font-size: 15px;\n  font-weight: 600;\n  margin-top: -16px;\n  color: rgba(121, 126, 132, 0.45);\n  display: flex;\n  flex-direction: column;\n}\n\n.i360-recommendations-no[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  width: 400px;\n  height: auto;\n  margin-top: 30px;\n}\n\n.ltr[_nghost-%COMP%]   .i360-recommendations-no[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-recommendations-no[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-left: 42px;\n}\n\n.rtl[_nghost-%COMP%]   .i360-recommendations-no[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-recommendations-no[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%] {\n  margin-right: 42px;\n}"]}),t})();const Ye=function(t){return{count:t}};function Ue(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",19),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"translate"),s["\u0275\u0275elementStart"](3,"mat-icon",20),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275text"](5,"info"),s["\u0275\u0275elementEnd"]()()),2&t){s["\u0275\u0275nextContext"]();const t=s["\u0275\u0275reference"](7);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](2,2,"dashboard.statusWarning.text",s["\u0275\u0275pureFunction1"](7,Ye,t.poorServersCount))," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("matTooltip",s["\u0275\u0275pipeBind1"](4,5,"dashboard.statusWarning.tooltip"))}}function He(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",21),s["\u0275\u0275element"](1,"mat-icon",22),s["\u0275\u0275elementStart"](2,"div",23),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementStart"](5,"div"),s["\u0275\u0275text"](6),s["\u0275\u0275pipe"](7,"translateCut"),s["\u0275\u0275pipe"](8,"translate"),s["\u0275\u0275elementStart"](9,"a",24),s["\u0275\u0275text"](10),s["\u0275\u0275pipe"](11,"translateCut"),s["\u0275\u0275pipe"](12,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](13),s["\u0275\u0275pipe"](14,"translateCut"),s["\u0275\u0275pipe"](15,"translate"),s["\u0275\u0275elementEnd"]()()()),2&t&&(s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,4,"dashboard.incidentsAndAlerts.empty")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](7,6,s["\u0275\u0275pipeBind1"](8,9,"dashboard.incidentsAndAlerts.help"),0)," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](11,11,s["\u0275\u0275pipeBind1"](12,14,"dashboard.incidentsAndAlerts.help"),1)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](14,16,s["\u0275\u0275pipeBind1"](15,19,"dashboard.incidentsAndAlerts.help"),2)," "))}function Ke(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",27)(1,"div",28),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"div",29),s["\u0275\u0275text"](5),s["\u0275\u0275elementEnd"]()()),2&t){const t=e.$implicit;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,2,"dashboard.incidentsAndAlerts."+t.paramName+".numTitle")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",t.number," ")}}function Xe(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",25),s["\u0275\u0275template"](1,Ke,6,4,"div",26),s["\u0275\u0275elementEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",t.fullTiles)}}const Je=function(t){return["/",t,"admin","malware","user-list"]};function tn(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"a",30),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translateCut"),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"translateCut"),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction1"](13,Je,t.imunify360Package)),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](3,3,s["\u0275\u0275pipeBind1"](4,6,"dashboard.incidentsAndAlerts.num_of_mrs.description"),1)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](6,8,s["\u0275\u0275pipeBind1"](7,11,"dashboard.incidentsAndAlerts.num_of_mrs.description"),2)," ")}}const en=function(t){return["/",t,"admin","malware","history"]};function nn(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"a",30),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translateCut"),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"translateCut"),s["\u0275\u0275pipe"](7,"translate"),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction1"](13,en,t.imunify360Package)),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](3,3,s["\u0275\u0275pipeBind1"](4,6,"dashboard.incidentsAndAlerts.num_of_cleanups.description"),1)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](6,8,s["\u0275\u0275pipeBind1"](7,11,"dashboard.incidentsAndAlerts.num_of_cleanups.description"),2)," ")}}function an(t,e){1&t&&(s["\u0275\u0275elementStart"](0,"div",31)(1,"div",32)(2,"mat-icon"),s["\u0275\u0275text"](3,"info"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](4),s["\u0275\u0275pipe"](5,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"div",33),s["\u0275\u0275text"](7),s["\u0275\u0275pipe"](8,"translateCut"),s["\u0275\u0275pipe"](9,"translate"),s["\u0275\u0275elementStart"](10,"a",34),s["\u0275\u0275text"](11),s["\u0275\u0275pipe"](12,"translateCut"),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](14),s["\u0275\u0275pipe"](15,"translateCut"),s["\u0275\u0275pipe"](16,"translate"),s["\u0275\u0275elementEnd"]()()),2&t&&(s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"]("",s["\u0275\u0275pipeBind1"](5,4,"dashboard.incidentsAndAlerts.bottomWarning.title")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](8,6,s["\u0275\u0275pipeBind1"](9,9,"dashboard.incidentsAndAlerts.bottomWarning.text"),0)," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](12,11,s["\u0275\u0275pipeBind1"](13,14,"dashboard.incidentsAndAlerts.bottomWarning.text"),1)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](15,16,s["\u0275\u0275pipeBind1"](16,19,"dashboard.incidentsAndAlerts.bottomWarning.text"),2)," "))}const rn={"24h":"hour","7d":"6h","30d":"day"};let on=(()=>{class t{constructor(t,e){this.dashboardService=t,this.xhr=e,this.imunify360Package=ee.GL.imunify360,this.ChartName=B.w,this.isEmpty=!1,this.fullTiles=[],this.previousParams={},this.destroyed=new a.Subject,this.loadChartData=t=>{const e={[w.heatmap]:{charts:[]},[w.histogram]:{charts:[]}};t[B.w.spam_ham]&&(t[B.w.ham]=t[B.w.spam_ham],t[B.w.spam]=t[B.w.spam_ham],delete t[B.w.spam_ham]);const n=Object.entries(t);n.some(([t,e])=>!(t in B.w)&&this.previousParams[t]!==e)&&(this.savedItems=null),this.previousParams=t;for(const[t,i]of n)t in B.w?this.savedItems&&this.savedItems[t].type===i||e[i].charts.push(t):(e.heatmap[t]=i,e.histogram[t]=i);let i=e.histogram.charts.length?this.dashboardService.getHistogramCharts(this.addGroupBy(e.histogram)):(0,a.of)(null);const r=e.heatmap.charts.length?this.dashboardService.getHeatmapCharts(e.heatmap):(0,a.of)(null);return(0,a.combineLatest)({histogram:i,heatmap:r}).pipe((0,a.map)(t=>{const{heatmap:n,histogram:i}=t;null===this.savedItems&&(this.savedItems={});for(const t of e.histogram.charts)this.savedItems[t]={type:w.histogram,data:i&&i[t]};for(const t of e.heatmap.charts)this.savedItems[t]={type:w.heatmap,data:n&&n[t]};const a=(0,z.Bw)(i,"spam"),r=(0,z.Bw)(i,"ham");return this.savedItems&&(this.savedItems.spam_ham={type:w.doughnut,data:r||a?[[r,a]]:[]}),{result:this.savedItems}}))}}ngOnInit(){this.versionRequest()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}ngAfterViewInit(){(0,a.combineLatest)([...this.tiles.toArray().map(t=>t.loadedData),...this.doughnutTiles.toArray().map(t=>t.loadedData)]).pipe((0,a.debounceTime)(0)).subscribe(t=>{this.isEmpty=t.every(t=>!!t&&0===t.length),this.fullTiles=this.tiles.filter(t=>!!t.number)})}addGroupBy(t){return t.group_by=rn[this.timeframe.widget.value],t}versionRequest(){(0,a.timer)(0).pipe((0,a.switchMap)(()=>this.xhr.post(ee.Lb.version())),(0,a.catchError)(()=>a.EMPTY),(0,a.repeatWhen)(t=>t.pipe((0,a.switchMap)(()=>(0,a.timer)(se.yc)))),(0,a.takeUntil)(this.destroyed)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](I),s["\u0275\u0275directiveInject"](Ot.K))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-dashboard"]],viewQuery:function(t,e){if(1&t&&(s["\u0275\u0275viewQuery"](V,7),s["\u0275\u0275viewQuery"](te.q,7),s["\u0275\u0275viewQuery"](Jt,5),s["\u0275\u0275viewQuery"](oe,5)),2&t){let t;s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.request=t.first),s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.timeframe=t.first),s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.tiles=t),s["\u0275\u0275queryRefresh"](t=s["\u0275\u0275loadQuery"]())&&(e.doughnutTiles=t)}},hostAttrs:[1,"display-block"],decls:65,vars:73,consts:[["i360-common-widgets-container","","i360Loader",""],[1,"i360-header-section"],["class","i360-status-warning",4,"ngIf"],["i360-widget","","i360-common-widget",""],["serverIdWidget",""],[1,"i360-dashboard-line"],[3,"item"],[3,"subheader"],["i360ServerRequest","",3,"getData"],["i360-flat-timeframe",""],["class","i360-dashboard-empty",4,"ngIf"],["class","i360-dashboard-counters",4,"ngIf"],[1,"i360-chart-tiles"],[3,"paramName"],["description",""],[3,"paramName","heatmapAllowed"],[4,"ngIf"],["href","https://docs.imunify360.com/features/#anti-bot-protection","target","_blank",1,"i360-dashboard-link"],["class","i360-dashboard-bottom-warning",4,"ngIf"],[1,"i360-status-warning"],[3,"matTooltip"],[1,"i360-dashboard-empty"],["svgIcon","dashboard-no-data-found"],[1,"i360-text"],["href","https://docs.imunify360.com/dashboard/","target","_blank",1,"i360-dashboard-link"],[1,"i360-dashboard-counters"],["class","i360-dashboard-counter",4,"ngFor","ngForOf"],[1,"i360-dashboard-counter"],[1,"i360-dashboard-counter-title"],[1,"i360-dashboard-counter-number"],[1,"i360-dashboard-link",3,"routerLink"],[1,"i360-dashboard-bottom-warning"],[1,"i360-dashboard-bottom-warning-title"],[1,"i360-dashboard-bottom-warning-text"],["href","https://docs.imunify360.com/dashboard/#charts","target","_blank",1,"i360-dashboard-link"]],template:function(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",0)(1,"div",1)(2,"i360-header"),s["\u0275\u0275text"](3),s["\u0275\u0275pipe"](4,"translate"),s["\u0275\u0275template"](5,Ue,6,9,"div",2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](6,"i360-server-id-widget",3,4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](8,"div",5)(9,"i360-recommendations",6),s["\u0275\u0275elementStart"](10,"i360-header",7),s["\u0275\u0275pipe"](11,"translate"),s["\u0275\u0275text"](12),s["\u0275\u0275pipe"](13,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"div",8),s["\u0275\u0275element"](15,"i360-widget",9),s["\u0275\u0275template"](16,He,16,21,"div",10),s["\u0275\u0275template"](17,Xe,2,1,"div",11),s["\u0275\u0275elementStart"](18,"div",12)(19,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](20,14),s["\u0275\u0275text"](21),s["\u0275\u0275pipe"](22,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](23,"i360-chart-tile",15),s["\u0275\u0275elementContainerStart"](24,14),s["\u0275\u0275text"](25),s["\u0275\u0275pipe"](26,"translateCut"),s["\u0275\u0275pipe"](27,"translate"),s["\u0275\u0275template"](28,tn,8,15,"ng-container",16),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"i360-chart-tile",15),s["\u0275\u0275elementContainerStart"](30,14),s["\u0275\u0275text"](31),s["\u0275\u0275pipe"](32,"translateCut"),s["\u0275\u0275pipe"](33,"translate"),s["\u0275\u0275template"](34,nn,8,15,"ng-container",16),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](35,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](36,14),s["\u0275\u0275text"](37),s["\u0275\u0275pipe"](38,"translateCut"),s["\u0275\u0275pipe"](39,"translate"),s["\u0275\u0275elementStart"](40,"a",17),s["\u0275\u0275text"](41),s["\u0275\u0275pipe"](42,"translateCut"),s["\u0275\u0275pipe"](43,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](44),s["\u0275\u0275pipe"](45,"translateCut"),s["\u0275\u0275pipe"](46,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](47,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](48,14),s["\u0275\u0275text"](49),s["\u0275\u0275pipe"](50,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](51,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](52,14),s["\u0275\u0275text"](53),s["\u0275\u0275pipe"](54,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](55,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](56,14),s["\u0275\u0275text"](57),s["\u0275\u0275pipe"](58,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](59,"i360-chart-tile",13),s["\u0275\u0275elementContainerStart"](60,14),s["\u0275\u0275text"](61),s["\u0275\u0275pipe"](62,"translate"),s["\u0275\u0275elementContainerEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](63,"i360-doughnut-tile",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](64,an,17,21,"div",18),s["\u0275\u0275elementEnd"]()()),2&t){const t=s["\u0275\u0275reference"](7);s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](4,32,"menu.dashboard")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",t.poorServersCount),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("item",t.currentActiveItem),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("subheader",s["\u0275\u0275pipeBind1"](11,34,"dashboard.incidentsAndAlerts.description")),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](13,36,"dashboard.incidentsAndAlerts.title")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("getData",e.loadChartData),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngIf",e.isEmpty),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.isEmpty),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.num_of_alerts),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](22,38,"dashboard.incidentsAndAlerts.num_of_alerts.description")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.num_of_mrs)("heatmapAllowed",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](26,40,s["\u0275\u0275pipeBind1"](27,43,"dashboard.incidentsAndAlerts.num_of_mrs.description"),0)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.widget.defaultValue===t.widget.value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("paramName",e.ChartName.num_of_cleanups)("heatmapAllowed",!1),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](32,45,s["\u0275\u0275pipeBind1"](33,48,"dashboard.incidentsAndAlerts.num_of_cleanups.description"),0)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.widget.defaultValue===t.widget.value),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("paramName",e.ChartName.captcha_blocked),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](38,50,s["\u0275\u0275pipeBind1"](39,53,"dashboard.incidentsAndAlerts.captcha_blocked.description"),0)," "),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](s["\u0275\u0275pipeBind2"](42,55,s["\u0275\u0275pipeBind1"](43,58,"dashboard.incidentsAndAlerts.captcha_blocked.description"),1)),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](45,60,s["\u0275\u0275pipeBind1"](46,63,"dashboard.incidentsAndAlerts.captcha_blocked.description"),2)," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("paramName",e.ChartName.waf_alerts),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](50,65,"dashboard.incidentsAndAlerts.waf_alerts.description")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.bruteforce_attacks),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](54,67,"dashboard.incidentsAndAlerts.bruteforce_attacks.description")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.ossec_alerts),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](58,69,"dashboard.incidentsAndAlerts.ossec_alerts.description")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.denied_bot_attacks),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](62,71,"dashboard.incidentsAndAlerts.denied_bot_attacks.description")," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("paramName",e.ChartName.spam_ham),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",!e.isEmpty)}},dependencies:[o.RouterLinkWithHref,T.W,te.q,le.r,F.b,de.w,L.e,k.NgForOf,k.NgIf,ce.MatTooltip,Q.MatIcon,V,oe,Jt,Re,Ze,Pe.v,Nt.X$],styles:[".i360-app .i360-severity-good {\n  background-color: #36b081;\n}\n.i360-app .i360-severity-medium {\n  background-color: #ffa83d;\n}\n.i360-app .i360-severity-poor {\n  background-color: #fc4c4c;\n}\n.i360-app .i360-severity-text-good {\n  color: #36b081;\n}\n.i360-app .i360-severity-text-medium {\n  color: #ffa83d;\n}\n.i360-app .i360-severity-text-poor {\n  color: #fc4c4c;\n}\n.i360-app .i360-severity-border-good {\n  border-color: #36b081;\n}\n.i360-app .i360-severity-border-medium {\n  border-color: #ffa83d;\n}\n.i360-app .i360-severity-border-poor {\n  border-color: #fc4c4c;\n}\n.i360-app i360-dashboard * {\n  line-height: normal !important;\n}\n.i360-app i360-server-id-widget {\n  padding-top: 18px;\n}\n.i360-app .i360-dashboard-line {\n  border-top: solid 1px #eceef1;\n  height: 1px;\n  margin-bottom: 23px;\n}\n.i360-app .i360-status-warning {\n  color: #fc4c4c;\n  display: flex;\n  align-items: center;\n  font-size: 13px !important;\n  font-weight: normal;\n  margin-bottom: -14px;\n}\n.ltr .i360-app .i360-status-warning .mat-icon {\n  margin-left: 6px;\n}\n.rtl .i360-app .i360-status-warning .mat-icon {\n  margin-right: 6px;\n}\n.i360-app .i360-chart-tiles {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  margin-top: 19px;\n  margin-left: -4px;\n  margin-right: -4px;\n}\n.i360-app .i360-chart-tiles i360-chart-tile, .i360-app .i360-chart-tiles i360-doughnut-tile {\n  margin-bottom: 13px;\n}\n@media all and (min-width: 1000px) {\n  .i360-app .i360-chart-tiles i360-chart-tile, .i360-app .i360-chart-tiles i360-doughnut-tile {\n    width: calc(50% - 8px);\n    margin-left: 4px;\n    margin-right: 4px;\n  }\n}\n@media all and (max-width: 1000px) {\n  .i360-app .i360-chart-tiles i360-chart-tile, .i360-app .i360-chart-tiles i360-doughnut-tile {\n    width: 100%;\n  }\n}\n.i360-app .i360-dashboard-counters {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n  border-radius: 6px;\n  margin-top: 22px;\n  background-color: #f4f5f7;\n}\n.i360-app .i360-dashboard-counters .i360-dashboard-counter {\n  display: flex;\n  flex-direction: column;\n  margin: 25px 31px;\n}\n.i360-app .i360-dashboard-counters .i360-dashboard-counter-title {\n  font-size: 13px;\n  font-weight: 600;\n  color: #797e84;\n  margin-bottom: 7px;\n  line-height: normal;\n}\n.i360-app .i360-dashboard-counters .i360-dashboard-counter-number {\n  font-size: 30px;\n  font-weight: bold;\n  line-height: normal;\n}\n.i360-app .i360-dashboard-empty {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 44px;\n}\n.i360-app .i360-dashboard-empty .mat-icon {\n  width: 100%;\n  height: auto;\n}\n.i360-app .i360-dashboard-empty .i360-text {\n  font-size: 13px;\n  font-weight: 600;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.85;\n  letter-spacing: normal;\n  text-align: center;\n  color: #595b5d;\n  margin-top: 24px;\n}\n.i360-app .i360-dashboard-bottom-warning {\n  margin-top: 30px;\n  font-size: 11px;\n  font-weight: 600;\n  font-style: normal;\n  font-stretch: normal;\n  line-height: 1.73;\n  letter-spacing: normal;\n  text-align: center;\n  color: #788896;\n}\n.i360-app .i360-dashboard-bottom-warning .mat-icon {\n  vertical-align: middle;\n  font-size: 22px;\n}\n.ltr .i360-app .i360-dashboard-bottom-warning .mat-icon {\n  margin-right: 2px;\n}\n.rtl .i360-app .i360-dashboard-bottom-warning .mat-icon {\n  margin-left: 2px;\n}\n.i360-app .i360-header-section {\n  margin-bottom: 15px;\n}\n.i360-app .i360-header-section i360-header {\n  margin-bottom: 40px;\n}\n.i360-app .i360-header-section i360-header div {\n  line-height: 18px !important;\n}"],encapsulation:2}),t})();var sn=n(89114),ln=n(76382),dn=n(32439),cn=n(69679),pn=n(24894),hn=n(19389),mn=n(71071),un=n(89361),gn=n(24402);function fn(t,e){if(1&t&&s["\u0275\u0275text"](0),2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275textInterpolate"](t.description)}}function vn(t,e){if(1&t&&s["\u0275\u0275text"](0),2&t){const t=s["\u0275\u0275nextContext"](2).$implicit;s["\u0275\u0275textInterpolate"](t.link_text)}}function xn(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"a",10)(1,"i360-default-if-not-translated",7),s["\u0275\u0275template"](2,vn,1,1,"ng-template",null,8,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()()),2&t){const t=s["\u0275\u0275nextContext"]().$implicit;s["\u0275\u0275property"]("href",t.link,s["\u0275\u0275sanitizeUrl"]),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("key","Noop: ")}}function bn(t,e){if(1&t&&(s["\u0275\u0275elementStart"](0,"div",3)(1,"div",4),s["\u0275\u0275text"](2),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"div")(4,"div",5),s["\u0275\u0275text"](5),s["\u0275\u0275pipe"](6,"dayjs"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",6)(8,"i360-default-if-not-translated",7),s["\u0275\u0275template"](9,fn,1,1,"ng-template",null,8,s["\u0275\u0275templateRefExtractor"]),s["\u0275\u0275elementEnd"]()(),s["\u0275\u0275template"](11,xn,4,2,"a",9),s["\u0275\u0275elementEnd"]()()),2&t){const t=e.$implicit,n=e.index;s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("#",n+1,""),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind2"](6,4,1e3*t.date,"L LTS")," "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("key","Noop: "),s["\u0275\u0275advance"](3),s["\u0275\u0275property"]("ngIf",t.link)}}function Cn(t,e){if(1&t&&(s["\u0275\u0275elementContainerStart"](0),s["\u0275\u0275elementStart"](1,"div",1),s["\u0275\u0275text"](2),s["\u0275\u0275pipe"](3,"translate"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](4,bn,12,7,"div",2),s["\u0275\u0275elementContainerEnd"]()),2&t){const t=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275classMapInterpolate1"]("i360-recommendations-title i360-severity-",t.severity,""),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](3,5,"dashboard.recommendations.lists.titles."+t.severity)," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("ngForOf",t.items)}}let yn=(()=>{class t{constructor(t,e){this.recommendationsComponent=t,this.translate=e}get items(){return this.recommendationsComponent.item.recommendations[this.severity]}}return t.\u0275fac=function(e){return new(e||t)(s["\u0275\u0275directiveInject"](Ze),s["\u0275\u0275directiveInject"](R.sK))},t.\u0275cmp=s["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-recommendations-list"]],inputs:{severity:"severity"},decls:1,vars:1,consts:[[4,"ngIf"],["role","heading","aria-level","4"],["class","i360-recommendation",4,"ngFor","ngForOf"],[1,"i360-recommendation"],[1,"i360-recommendations-list-order"],[1,"i360-recommendations-list-date"],[1,"i360-recommendations-list-text"],[3,"key"],["default",""],["class","i360-dashboard-link","target","_blank",3,"href",4,"ngIf"],["target","_blank",1,"i360-dashboard-link",3,"href"]],template:function(t,e){1&t&&s["\u0275\u0275template"](0,Cn,5,7,"ng-container",0),2&t&&s["\u0275\u0275property"]("ngIf",e.recommendationsComponent.item&&e.items.length)},dependencies:[un.T,k.NgForOf,k.NgIf,Nt.X$,gn.DQ],styles:[".i360-recommendations-title {\n  border-radius: 100px;\n  font-size: 9px;\n  font-weight: 600;\n  height: 20px;\n  color: white;\n  padding: 4px 11px;\n  display: inline-block;\n  margin-bottom: 12px;\n}\n\n.i360-recommendation[_ngcontent-%COMP%] {\n  display: flex;\n  flex-wrap: nowrap;\n  margin-bottom: 23px;\n}\n\n.i360-recommendation[_ngcontent-%COMP%]:last-child {\n  margin-bottom: 19px;\n}\n\n.i360-recommendations-list-order[_ngcontent-%COMP%] {\n  font-size: 12px;\n  font-weight: 600;\n  color: #797e84;\n}\n\n.ltr[_nghost-%COMP%]   .i360-recommendations-list-order[_ngcontent-%COMP%], .ltr   [_nghost-%COMP%]   .i360-recommendations-list-order[_ngcontent-%COMP%] {\n  margin-right: 10px;\n}\n\n.rtl[_nghost-%COMP%]   .i360-recommendations-list-order[_ngcontent-%COMP%], .rtl   [_nghost-%COMP%]   .i360-recommendations-list-order[_ngcontent-%COMP%] {\n  margin-left: 10px;\n}\n\n.i360-recommendations-list-date[_ngcontent-%COMP%] {\n  font-size: 12px;\n  color: #a8abae;\n  margin-bottom: 1px;\n}\n\n.i360-recommendations-list-text[_ngcontent-%COMP%] {\n  font-size: 13px;\n  font-weight: bold;\n  color: #1d1d1d;\n  margin-bottom: 3px;\n}\n\n.i360-dashboard-link[_ngcontent-%COMP%] {\n  color: #1d1d1d;\n}"]}),t})();var wn=n(8373),Mn=n(54635);let Sn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({}),t})(),_n=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=s["\u0275\u0275defineInjector"]({providers:[I,{provide:l.HTTP_INTERCEPTORS,useClass:ln.d,multi:!0}],imports:[o.RouterModule.forChild([{path:"",component:on,canActivate:[I],runGuardsAndResolvers:"paramsOrQueryParamsChange"}]),P.a,E.l,A.V,O.z,sn.S,dn.T,k.CommonModule,ce.MatTooltipModule,Q.MatIconModule,be.MatFormFieldModule,ye.MatInputModule,$e.MatAutocompleteModule,l.HttpClientModule,cn.Q,pn.T,hn.r,Ce.TextFieldModule,mn.L,gn.ou,wn.N,Mn.c,Sn]}),t})();s["\u0275\u0275setComponentScope"](Ze,function(){return[k.NgIf,Q.MatIcon,yn]},function(){return[Nt.X$]})},17951:(t,e,n)=>{n.d(e,{Ln:()=>p,in:()=>d,x9:()=>c});var i=n(91792),a=n(29012),r=n(53850),o=n(52191),s=n(11807),l=n(86375);const d=5e3,c=1048576;let p=(()=>{class t{constructor(t,e,n){this.router=t,this.appState=e,this.installationBackendService=n,this.accumulatedLog=new i.BehaviorSubject([]),this.shownSlidesCount=0,this.logCollector$=(0,i.timer)(0).pipe((0,i.switchMap)(()=>this.installationBackendService.status({offset:this.offset,limit:c})),(0,i.tap)(t=>{const e=t.data.items,n=e.offset-this.offset;this.offset=e.offset;const i=e.log;i&&this.accumulatedLog.next(this.accumulatedLog.getValue().concat([{text:i}])),0===n&&this.appState.imunifyStatus.value!==a.bk.INSTALLING&&this.stopWatchingLog(),this.appState.imunifyStatus.value===a.bk.OK&&this.router.navigate(["/"],{replaceUrl:!0})}),(0,i.catchError)(()=>(0,i.timer)(3e3)),(0,i.repeat)({delay:3e3})),this.statusWatcher$=(0,i.timer)(0).pipe((0,i.switchMap)(()=>this.installationBackendService.status({offset:this.offset,limit:c})),(0,i.tap)(t=>{this.appState.imunifyStatus.value!==a.bk.INSTALLING&&this.stopWatchingStatus()}),(0,i.catchError)(()=>(0,i.timer)(d)),(0,i.repeat)({delay:d})),this.logCollectorSubscription=i.Subscription.EMPTY,this.statusCollectorSubscription=i.Subscription.EMPTY,this.offset=0}start(){return this.offset=0,this.accumulatedLog.next([]),(0,i.firstValueFrom)(this.installationBackendService.start(),{defaultValue:void 0})}startWatchingLog(){this.logCollectorSubscription=this.logCollector$.subscribe()}startWatchingStatus(){this.statusCollectorSubscription=this.statusWatcher$.subscribe()}stopWatchingLog(){this.logCollectorSubscription.unsubscribe()}stopWatchingStatus(){this.statusCollectorSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275inject"](o.Router),r["\u0275\u0275inject"](s.a),r["\u0275\u0275inject"](l.E))},t.\u0275prov=r["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t})()},35844:(t,e,n)=>{n.d(e,{sY:()=>O,yc:()=>_});var i=n(53850),a=n(15237),r=n(39749),o=n(91792),s=n(29012),l=n(72986),d=n(86375),c=n(11807),p=n(17951),h=n(60136),m=n(67916),u=n(38699);const g=["installationSlide"];function f(t,e){}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6)(1,"div",7)(2,"div",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",9),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"]()(),i["\u0275\u0275element"](8,"preview-screenshot",10),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,3,"installation.dashboard.title")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,5,"installation.dashboard.text")," "))}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275element"](1,"preview-screenshot",11),i["\u0275\u0275elementStart"](2,"div",7)(3,"div",8),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",9),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"]()()()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,3,"installation.firewall.title")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,5,"installation.firewall.text")," "))}function b(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6)(1,"div",7)(2,"div",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",9),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"]()(),i["\u0275\u0275element"](8,"preview-screenshot",12),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,3,"installation.malware.title")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,5,"installation.malware.text")," "))}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275element"](1,"preview-screenshot",13),i["\u0275\u0275elementStart"](2,"div",7)(3,"div",8),i["\u0275\u0275text"](4),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",9),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"]()()()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](5,3,"installation.proactive.title")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](8,5,"installation.proactive.text")," "))}function y(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6)(1,"div",7)(2,"div",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",14)(6,"div")(7,"div",15),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"div",9),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"]()(),i["\u0275\u0275elementStart"](13,"div")(14,"div",15),i["\u0275\u0275text"](15),i["\u0275\u0275pipe"](16,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",9),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"]()()()()()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,6,"installation.patch.title")," "),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,8,"installation.patch.subtitle1")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,10,"installation.patch.text1")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](16,12,"installation.patch.subtitle2")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](19,14,"installation.patch.text2")))}function w(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",6)(1,"div",7)(2,"div",8),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",9),i["\u0275\u0275text"](6),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementEnd"]()()()),2&t&&(i["\u0275\u0275property"]("@enterAnimation",void 0),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"installation.reputation.title")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](7,5,"installation.reputation.text")," "))}function M(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275template"](1,f,0,0,"ng-template",4),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,v,9,7,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](5,x,9,7,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](7,b,9,7,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](9,C,9,7,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](11,y,20,16,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](13,w,8,7,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",i["\u0275\u0275pipeBind1"](2,1,t.activeSlide$))}}function S(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"installation.textForUser")))}const _=2e4,I=.15*_;let O=(()=>{class t{constructor(t,e,n,i){this.authState=t,this.installationBackendService=e,this.appState=n,this.installationService=i,this.activeSlide$=(0,o.timer)(0,_).pipe((0,o.map)(()=>{const t=this.installationService.shownSlidesCount%this.slides.length;return this.slides.toArray()[t]}),(0,o.tap)(()=>{this.installationService.shownSlidesCount+=1})),this.isAv=IMUNIFY_PACKAGE===r.GL.imunifyAV,this.AgentStatus=s.bk,this.destroyed=new o.Subject,this.startPollingStatus()}ngOnDestroy(){this.installationService.shownSlidesCount-=1,this.destroyed.next(),this.destroyed.complete()}startPollingStatus(){const t=this.installationBackendService.status({offset:0,limit:1},!1,!1);(0,o.timer)(0).pipe((0,o.switchMap)(()=>t),(0,o.catchError)(()=>o.EMPTY),(0,o.repeat)({delay:5e3}),(0,o.takeUntil)(this.destroyed)).subscribe()}}return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.j),i["\u0275\u0275directiveInject"](d.E),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](p.Ln))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["installation-slider"]],viewQuery:function(t,e){if(1&t&&i["\u0275\u0275viewQuery"](g,5),2&t){let t;i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.slides=t)}},decls:6,vars:6,consts:[[1,"i360-installation-wrapper"],["class","i360-installation-slider-wrapper",4,"ngIf","ngIfElse"],["textForUser",""],[1,"i360-installation-slider-wrapper"],[3,"ngTemplateOutlet"],["installationSlide",""],[1,"i360-slide"],[1,"i360-preview-info"],["role","heading","aria-level","1"],[1,"i360-paragraph"],["screenshotName","dashboard-preview"],["screenshotName","license-extension-preview"],["screenshotName","malware-scanner-preview"],["screenshotName","proactive-preview"],[1,"i360-just-text"],["role","heading","aria-level","2"],["id","text-for-user",1,"i360-paragraph"]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,M,15,3,"div",1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275template"](4,S,3,3,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&t){const t=i["\u0275\u0275reference"](5);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](2,2,e.authState.isAdmin)&&(!e.isAv||i["\u0275\u0275pipeBind1"](3,4,e.appState.imunifyStatus)===e.AgentStatus.UPGRADING))("ngIfElse",t)}},dependencies:[h.NgIf,h.NgTemplateOutlet,m.D,h.AsyncPipe,u.X$],styles:['.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide {\n  margin: 0 -20px;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  align-items: center;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide > *:first-child {\n  margin-bottom: 20px;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide preview-screenshot {\n  flex-basis: 540px;\n  flex-grow: 1;\n  padding: 20px;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-paragraph, .i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info [aria-level="2"] {\n  line-height: 1.69;\n  font-size: 13px;\n  color: #555;\n  white-space: pre-line;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info {\n  display: inline;\n  font-size: 13px;\n  flex-basis: 360px;\n  flex-grow: 1;\n  padding: 20px;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info [aria-level="1"] {\n  font-size: 24px;\n  font-weight: bold;\n  margin-bottom: 21px;\n  color: #535353;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info [aria-level="2"] {\n  font-weight: bold;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info .i360-just-text {\n  display: flex;\n  flex-wrap: wrap;\n}\n.i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info .i360-just-text > div {\n  flex-basis: 360px;\n  flex-grow: 1;\n  margin-bottom: 20px;\n}\n.ltr .i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info .i360-just-text > div:first-child {\n  margin-right: 70px;\n}\n.rtl .i360-app .i360-installation-wrapper .i360-installation-slider-wrapper .i360-slide .i360-preview-info .i360-just-text > div:first-child {\n  margin-left: 70px;\n}'],encapsulation:2,data:{animation:[(0,a.trigger)("enterAnimation",[(0,a.transition)(":enter",[(0,a.style)({opacity:0}),(0,a.animate)(`${I}ms`,(0,a.style)({opacity:1})),(0,a.animate)(`${I}ms ${_-2*I}ms`,(0,a.style)({opacity:0}))])])]}}),t})()},85905:(t,e,n)=>{n.d(e,{M:()=>d});var i=n(29012);class a{static getJwtToken(){return new i.Kl(["auth-cloud"])}}var r=n(91792),o=n(53850),s=n(13336),l=n(72986);let d=(()=>{class t{constructor(t,e){this.xhr=t,this.authState=e}getJwtToken(){if(this.authState.jwtToken)return(0,r.of)(this.authState.jwtToken);if(this.authState.jwtTokenRequest$)return this.authState.jwtTokenRequest$;const t=new r.Subject;return this.authState.jwtTokenRequest$=t,this.xhr.rx(a.getJwtToken,!1,!1)().pipe((0,r.take)(1),(0,r.catchError)(()=>(0,r.of)(void 0)),(0,r.finalize)(()=>{this.authState.jwtTokenRequest$=null})).subscribe(e=>{this.authState.jwtToken=e?.data?.items,t.next(this.authState.jwtToken)}),t.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275inject"](s.K),o["\u0275\u0275inject"](l.j))},t.\u0275prov=o["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},89361:(t,e,n)=>{n.d(e,{T:()=>m});var i=n(53850),a=n(60136),r=n(38699);const o=["default"];function s(t,e){}function l(t,e){if(1&t&&i["\u0275\u0275template"](0,s,0,0,"ng-template",4),2&t){const t=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngTemplateOutlet",t.defaultTemplate)}}function d(t,e){if(1&t&&i["\u0275\u0275text"](0),2&t){const t=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275textInterpolate1"](" ",t," ")}}function c(t,e){if(1&t&&(i["\u0275\u0275template"](0,l,1,1,"ng-template",2),i["\u0275\u0275template"](1,d,1,1,"ng-template",null,3,i["\u0275\u0275templateRefExtractor"])),2&t){const t=e.$implicit,n=i["\u0275\u0275reference"](2),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",a.key===t)("ngIfElse",n)}}function p(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}const h=function(t){return{$implicit:t}};let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["i360-default-if-not-translated"]],contentQueries:function(t,e,n){if(1&t&&i["\u0275\u0275contentQuery"](n,o,7),2&t){let t;i["\u0275\u0275queryRefresh"](t=i["\u0275\u0275loadQuery"]())&&(e.defaultTemplate=t.first)}},inputs:{key:"key"},decls:4,vars:6,consts:[["helper",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngIf","ngIfElse"],["foundKeyTemplate",""],[3,"ngTemplateOutlet"]],template:function(t,e){if(1&t&&(i["\u0275\u0275template"](0,c,3,2,"ng-template",null,0,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275template"](2,p,1,0,"ng-container",1),i["\u0275\u0275pipe"](3,"translate")),2&t){const t=i["\u0275\u0275reference"](1);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngTemplateOutlet",t)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](4,h,i["\u0275\u0275pipeBind1"](3,2,e.key)))}},dependencies:[a.NgIf,a.NgTemplateOutlet,r.X$],encapsulation:2}),t})()}}]);
//# sourceMappingURL=src_app_components_dashboard_dashboard_module_ts.daca2434e36f3e71.js.map