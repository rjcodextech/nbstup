{"version":3,"sources":["frontend.js"],"names":["window","document","sidebar","querySelector","updateActiveNavLink","navLinks","querySelectorAll","scrollPosition","pageYOffset","forEach","link","targetTop","targetId","getAttribute","slice","target","getElementById","targetBottom","offsetTop","offsetHeight","classList","add","remove","addEventListener","event","closest","preventDefault","scrollTo","top","getBoundingClientRect","behavior","jQuery","ready","$","$stateSelect","$districtSelect","$blockSelect","length","pmpro_nbstup_data","on","stateId","this","val","html","prop","ajax","url","ajax_url","type","data","action","state_id","nonce","ajax_nonce","beforeSend","success","response","options","each","index","district","id","name","error","districtId","district_id","block","$selectAll","checked","$aadhar","$memberName","$memberPhone","$memberPassword","$username","$password","$password2","$bemail","$bconfirm","$bfirstname","$blastname","$bphone","$memberDetails","syncFromMemberDetails","aadharValue","trim","replace","fullName","phoneValue","passwordValue","nameParts","split","firstName","lastName","join","emailValue","find","$containers","showMessage","$form","message","removeAttr","text","setLoading","isLoading","toggleClass","clearFieldErrors","removeClass","setFieldError","$field","$wrapper","fieldName","attr","errorId","addClass","class","appendTo","$container","not","$tab","$panel","$input","value","sanitized","login_nonce","redirect","user_login","user_password","remember","is","aadharNumber","aadhar_number","member_password","isValid","$login","validation_login","validation_password","test","validation_aadhar_format","validation_aadhar","dataType","done","location","href","generic_error","fail","always","validation_message","$firstError","first","trigger"],"mappings":"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","file":"frontend.js","sourcesContent":["// Frontend JS for NBSTUP account layout.\r\n// This file is processed by Gulp into `assets/js/dist/frontend.js`.\r\n// Add any interactive behavior for the left menu / account layout here.\r\n\r\n(function (window, document) {\r\n  'use strict';\r\n\r\n  var sidebar = document.querySelector('.pmpro-nbstup-account-sidebar');\r\n  if (!sidebar) {\r\n    return;\r\n  }\r\n\r\n  // Smooth scroll for in-page anchor links inside the NBSTUP menu.\r\n  sidebar.addEventListener('click', function (event) {\r\n    var link = event.target.closest('a[href^=\"#\"]');\r\n    if (!link) {\r\n      return;\r\n    }\r\n\r\n    var targetId = link.getAttribute('href').slice(1);\r\n    var target = document.getElementById(targetId);\r\n    if (!target) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n\r\n    window.scrollTo({\r\n      top: target.getBoundingClientRect().top + window.pageYOffset - 80,\r\n      behavior: 'smooth'\r\n    });\r\n  });\r\n\r\n  // Function to update active navigation link based on scroll position\r\n  function updateActiveNavLink() {\r\n    var navLinks = sidebar.querySelectorAll('.pmpro-nbstup-account-nav a[href^=\"#\"]');\r\n    var scrollPosition = window.pageYOffset + 100; // Offset for header\r\n\r\n    navLinks.forEach(function(link) {\r\n      var targetId = link.getAttribute('href').slice(1);\r\n      var target = document.getElementById(targetId);\r\n      if (target) {\r\n        var targetTop = target.offsetTop;\r\n        var targetBottom = targetTop + target.offsetHeight;\r\n\r\n        if (scrollPosition >= targetTop && scrollPosition < targetBottom) {\r\n          link.classList.add('active');\r\n        } else {\r\n          link.classList.remove('active');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Update active link on scroll and on load\r\n  window.addEventListener('scroll', updateActiveNavLink);\r\n  window.addEventListener('load', updateActiveNavLink);\r\n\r\n})(window, document);\r\n\r\n// ========== Location Cascading Dropdowns ==========\r\njQuery(document).ready(function($) {\r\n  // Check if we're on checkout page with location fields\r\n  if (!$('#user_state').length || typeof pmpro_nbstup_data === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  var $stateSelect = $('#user_state');\r\n  var $districtSelect = $('#user_district');\r\n  var $blockSelect = $('#user_block');\r\n\r\n  // When state changes, load districts\r\n  $stateSelect.on('change', function() {\r\n    var stateId = $(this).val();\r\n    \r\n    // Reset district and block\r\n    $districtSelect.html('<option value=\"\">Select State First</option>').prop('disabled', true);\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!stateId) {\r\n      return;\r\n    }\r\n    \r\n    // Load districts\r\n    $.ajax({\r\n      url: pmpro_nbstup_data.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_districts',\r\n        state_id: stateId,\r\n        nonce: pmpro_nbstup_data.ajax_nonce\r\n      },\r\n      beforeSend: function() {\r\n        $districtSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select District</option>';\r\n          $.each(response.data, function(index, district) {\r\n            options += '<option value=\"' + district.id + '\">' + district.name + '</option>';\r\n          });\r\n          $districtSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $districtSelect.html('<option value=\"\">No districts available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $districtSelect.html('<option value=\"\">Error loading districts</option>');\r\n      }\r\n    });\r\n  });\r\n\r\n  // When district changes, load blocks\r\n  $districtSelect.on('change', function() {\r\n    var districtId = $(this).val();\r\n    \r\n    // Reset block\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!districtId) {\r\n      return;\r\n    }\r\n    \r\n    // Load blocks\r\n    $.ajax({\r\n      url: pmpro_nbstup_data.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_blocks',\r\n        district_id: districtId,\r\n        nonce: pmpro_nbstup_data.ajax_nonce\r\n      },\r\n      beforeSend: function() {\r\n        $blockSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select Block</option>';\r\n          $.each(response.data, function(index, block) {\r\n            options += '<option value=\"' + block.id + '\">' + block.name + '</option>';\r\n          });\r\n          $blockSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $blockSelect.html('<option value=\"\">No blocks available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $blockSelect.html('<option value=\"\">Error loading blocks</option>');\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\n// ========== Contributions Admin: Select All ==========\r\njQuery(document).ready(function($) {\r\n  var $selectAll = $('#select-all');\r\n  if (!$selectAll.length) {\r\n    return;\r\n  }\r\n\r\n  $selectAll.on('change', function() {\r\n    $('input[name=\"user_ids[]\"]').prop('checked', this.checked);\r\n  });\r\n});\r\n\r\n// ========== Login Tabs + AJAX Login ==========\r\njQuery(document).ready(function ($) {\r\n  var $memberDetails = $('#pmpro_form_fieldset-member-details');\r\n  if ($memberDetails.length) {\r\n    var $aadhar = $memberDetails.find('#aadhar_number');\r\n    var $memberName = $memberDetails.find('#member_name');\r\n    var $memberPhone = $memberDetails.find('#phone_no');\r\n    var $memberPassword = $memberDetails.find('#member_password');\r\n    var $username = $('#pmpro_user_fields #username');\r\n    var $password = $('#pmpro_user_fields #password');\r\n    var $password2 = $('#pmpro_user_fields #password2');\r\n    var $bemail = $('#pmpro_user_fields #bemail');\r\n    var $bconfirm = $('#pmpro_user_fields #bconfirmemail');\r\n    var $bfirstname = $('#pmpro_billing_address_fields #bfirstname');\r\n    var $blastname = $('#pmpro_billing_address_fields #blastname');\r\n    var $bphone = $('#pmpro_billing_address_fields #bphone');\r\n\r\n    function buildEmail(aadharValue) {\r\n      return aadharValue ? aadharValue + '@nbstup.com' : '';\r\n    }\r\n\r\n    function syncFromMemberDetails() {\r\n      var aadharValue = $aadhar.length ? $.trim($aadhar.val()).replace(/\\D+/g, '') : '';\r\n      var fullName = $memberName.length ? $.trim($memberName.val() || '') : '';\r\n      var phoneValue = $memberPhone.length ? $.trim($memberPhone.val() || '') : '';\r\n      var passwordValue = $memberPassword.length ? ($memberPassword.val() || '') : '';\r\n      var nameParts = fullName ? fullName.split(/\\s+/) : [];\r\n      var firstName = nameParts.length ? nameParts[0] : '';\r\n      var lastName = nameParts.length > 1 ? nameParts.slice(1).join(' ') : '';\r\n\r\n      if ($username.length) {\r\n        $username.val(aadharValue);\r\n      }\r\n      if ($password.length) {\r\n        $password.val(passwordValue);\r\n      }\r\n      if ($password2.length) {\r\n        $password2.val(passwordValue);\r\n      }\r\n      var emailValue = buildEmail(aadharValue);\r\n      if ($bemail.length) {\r\n        $bemail.val(emailValue);\r\n      }\r\n      if ($bconfirm.length) {\r\n        $bconfirm.val(emailValue);\r\n      }\r\n      if ($bfirstname.length) {\r\n        $bfirstname.val(firstName);\r\n      }\r\n      if ($blastname.length) {\r\n        $blastname.val(lastName);\r\n      }\r\n      if ($bphone.length) {\r\n        $bphone.val(phoneValue);\r\n      }\r\n    }\r\n\r\n    $memberDetails.on('input change', '#aadhar_number, #member_password, #member_name, #phone_no', syncFromMemberDetails);\r\n    syncFromMemberDetails();\r\n  }\r\n\r\n  var $containers = $('.pmpro-nbstup-login-tabs');\r\n  if (!$containers.length || typeof pmpro_nbstup_data === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  $containers.each(function () {\r\n    var $container = $(this);\r\n    $container.find('.pmpro-nbstup-login-panel').not('.is-active').attr('hidden', true);\r\n\r\n    $container.on('click', '.pmpro-nbstup-login-tab', function () {\r\n      var $tab = $(this);\r\n      var target = $tab.data('tab');\r\n      $container.find('.pmpro-nbstup-login-tab')\r\n        .removeClass('is-active')\r\n        .attr('aria-selected', 'false');\r\n      $tab.addClass('is-active').attr('aria-selected', 'true');\r\n\r\n      $container.find('.pmpro-nbstup-login-panel')\r\n        .removeClass('is-active')\r\n        .attr('hidden', true);\r\n\r\n      var $panel = $container.find('.pmpro-nbstup-login-panel[data-panel=\"' + target + '\"]');\r\n      $panel.addClass('is-active').removeAttr('hidden');\r\n      $panel.find('.pmpro-nbstup-login-message').attr('hidden', true).text('');\r\n      clearFieldErrors($panel.find('.pmpro-nbstup-login-form'));\r\n    });\r\n  });\r\n\r\n  function showMessage($form, message) {\r\n    var $message = $form.closest('.pmpro-nbstup-login-panel').find('.pmpro-nbstup-login-message');\r\n    $message.removeAttr('hidden').text(message);\r\n  }\r\n\r\n  function setLoading($form, isLoading) {\r\n    var $button = $form.find('button[type=\"submit\"]');\r\n    $button.prop('disabled', isLoading);\r\n    $form.toggleClass('is-loading', isLoading);\r\n  }\r\n\r\n  function clearFieldErrors($form) {\r\n    if (!$form || !$form.length) {\r\n      return;\r\n    }\r\n\r\n    $form.find('.pmpro-nbstup-member-login__field').removeClass('has-error');\r\n    $form.find('.pmpro-nbstup-field-error').remove();\r\n    $form.find('.pmpro-nbstup-member-login__input').removeAttr('aria-invalid aria-describedby');\r\n  }\r\n\r\n  function setFieldError($form, $field, message) {\r\n    var $wrapper = $field.closest('.pmpro-nbstup-member-login__field');\r\n    var fieldName = $field.attr('name') || 'field';\r\n    var formType = $form.data('login-type') || 'login';\r\n    var errorId = 'pmpro-nbstup-' + formType + '-' + fieldName + '-error';\r\n\r\n    $wrapper.addClass('has-error');\r\n    $field.attr('aria-invalid', 'true').attr('aria-describedby', errorId);\r\n\r\n    if (!$wrapper.find('#' + errorId).length) {\r\n      $('<div/>', {\r\n        class: 'pmpro-nbstup-field-error',\r\n        id: errorId,\r\n        text: message\r\n      }).appendTo($wrapper);\r\n    }\r\n  }\r\n\r\n  function clearFieldError($field) {\r\n    var $wrapper = $field.closest('.pmpro-nbstup-member-login__field');\r\n    $wrapper.removeClass('has-error');\r\n    $wrapper.find('.pmpro-nbstup-field-error').remove();\r\n    $field.removeAttr('aria-invalid aria-describedby');\r\n  }\r\n\r\n  function validateForm($form) {\r\n    var isValid = true;\r\n    var type = $form.data('login-type');\r\n\r\n    if (type === 'admin') {\r\n      var $login = $form.find('input[name=\"user_login\"]');\r\n      var $password = $form.find('input[name=\"user_password\"]');\r\n\r\n      if (!$.trim($login.val())) {\r\n        setFieldError($form, $login, pmpro_nbstup_data.validation_login || 'Please enter your username or email.');\r\n        isValid = false;\r\n      }\r\n\r\n      if (!$.trim($password.val())) {\r\n        setFieldError($form, $password, pmpro_nbstup_data.validation_password || 'Please enter your password.');\r\n        isValid = false;\r\n      }\r\n    } else {\r\n      var $aadhar = $form.find('input[name=\"aadhar_number\"]');\r\n      var $memberPassword = $form.find('input[name=\"member_password\"]');\r\n      var aadharValue = $.trim($aadhar.val()).replace(/\\s+/g, '');\r\n\r\n      if (!aadharValue) {\r\n        setFieldError($form, $aadhar, pmpro_nbstup_data.validation_aadhar || 'Please enter your Aadhar number.');\r\n        isValid = false;\r\n      } else if (!/^\\d{12}$/.test(aadharValue)) {\r\n        setFieldError($form, $aadhar, pmpro_nbstup_data.validation_aadhar_format || 'Enter a valid 12-digit Aadhar number.');\r\n        isValid = false;\r\n      }\r\n\r\n      if (!$.trim($memberPassword.val())) {\r\n        setFieldError($form, $memberPassword, pmpro_nbstup_data.validation_password || 'Please enter your password.');\r\n        isValid = false;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  $(document).on('input', 'input[name=\"aadhar_number\"]', function () {\r\n    var $input = $(this);\r\n    var value = $input.val();\r\n    var sanitized = value.replace(/\\D+/g, '').slice(0, 12);\r\n\r\n    if (value !== sanitized) {\r\n      $input.val(sanitized);\r\n    }\r\n  });\r\n\r\n  $(document).on('input', '.pmpro-nbstup-member-login__input', function () {\r\n    clearFieldError($(this));\r\n  });\r\n\r\n  $(document).on('submit', '.pmpro-nbstup-login-form', function (event) {\r\n    event.preventDefault();\r\n\r\n    var $form = $(this);\r\n    var type = $form.data('login-type');\r\n    clearFieldErrors($form);\r\n\r\n    var data = {\r\n      action: type === 'admin' ? 'pmpronbstup_admin_login' : 'pmpronbstup_member_login',\r\n      nonce: pmpro_nbstup_data.login_nonce,\r\n      redirect: $form.data('redirect') || ''\r\n    };\r\n\r\n    if (type === 'admin') {\r\n      data.user_login = $.trim($form.find('input[name=\"user_login\"]').val());\r\n      data.user_password = $form.find('input[name=\"user_password\"]').val();\r\n      data.remember = $form.find('input[name=\"remember\"]').is(':checked') ? 1 : 0;\r\n    } else {\r\n      var aadharNumber = $.trim($form.find('input[name=\"aadhar_number\"]').val()).replace(/\\D+/g, '');\r\n      data.aadhar_number = aadharNumber;\r\n      data.member_password = $form.find('input[name=\"member_password\"]').val();\r\n    }\r\n\r\n    if (!validateForm($form)) {\r\n      showMessage($form, pmpro_nbstup_data.validation_message || 'Please fix the highlighted fields and try again.');\r\n      var $firstError = $form.find('.pmpro-nbstup-member-login__field.has-error').first();\r\n      if ($firstError.length) {\r\n        $firstError.find('input').first().trigger('focus');\r\n      }\r\n      return;\r\n    }\r\n\r\n    setLoading($form, true);\r\n\r\n    $.ajax({\r\n      url: pmpro_nbstup_data.ajax_url,\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      data: data\r\n    })\r\n      .done(function (response) {\r\n        if (response && response.success) {\r\n          var redirect = response.data && response.data.redirect ? response.data.redirect : window.location.href;\r\n          window.location.href = redirect;\r\n        } else {\r\n          var message = response && response.data && response.data.message ? response.data.message : pmpro_nbstup_data.generic_error;\r\n          showMessage($form, message);\r\n        }\r\n      })\r\n      .fail(function () {\r\n        showMessage($form, pmpro_nbstup_data.generic_error);\r\n      })\r\n      .always(function () {\r\n        setLoading($form, false);\r\n      });\r\n  });\r\n});\r\n"]}