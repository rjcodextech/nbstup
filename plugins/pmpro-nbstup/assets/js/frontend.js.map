{"version":3,"sources":["frontend.js"],"names":["window","document","sidebar","querySelector","updateActiveNavLink","navLinks","querySelectorAll","scrollPosition","pageYOffset","forEach","link","targetTop","targetId","getAttribute","slice","target","getElementById","targetBottom","offsetTop","offsetHeight","classList","add","remove","addEventListener","event","closest","preventDefault","scrollTo","top","getBoundingClientRect","behavior","jQuery","ready","$","$stateSelect","$districtSelect","$blockSelect","length","on","stateId","this","val","html","prop","ajax","url","pmpro_nbstup_ajax","ajax_url","type","data","action","state_id","nonce","beforeSend","success","response","options","each","index","district","id","name","error","districtId","district_id","block","$selectAll","checked"],"mappings":"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","file":"frontend.js","sourcesContent":["// Frontend JS for NBSTUP account layout.\r\n// This file is processed by Gulp into `assets/js/dist/frontend.js`.\r\n// Add any interactive behavior for the left menu / account layout here.\r\n\r\n(function (window, document) {\r\n  'use strict';\r\n\r\n  var sidebar = document.querySelector('.pmpro-nbstup-account-sidebar');\r\n  if (!sidebar) {\r\n    return;\r\n  }\r\n\r\n  // Smooth scroll for in-page anchor links inside the NBSTUP menu.\r\n  sidebar.addEventListener('click', function (event) {\r\n    var link = event.target.closest('a[href^=\"#\"]');\r\n    if (!link) {\r\n      return;\r\n    }\r\n\r\n    var targetId = link.getAttribute('href').slice(1);\r\n    var target = document.getElementById(targetId);\r\n    if (!target) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n\r\n    window.scrollTo({\r\n      top: target.getBoundingClientRect().top + window.pageYOffset - 80,\r\n      behavior: 'smooth'\r\n    });\r\n  });\r\n\r\n  // Function to update active navigation link based on scroll position\r\n  function updateActiveNavLink() {\r\n    var navLinks = sidebar.querySelectorAll('.pmpro-nbstup-account-nav a[href^=\"#\"]');\r\n    var scrollPosition = window.pageYOffset + 100; // Offset for header\r\n\r\n    navLinks.forEach(function(link) {\r\n      var targetId = link.getAttribute('href').slice(1);\r\n      var target = document.getElementById(targetId);\r\n      if (target) {\r\n        var targetTop = target.offsetTop;\r\n        var targetBottom = targetTop + target.offsetHeight;\r\n\r\n        if (scrollPosition >= targetTop && scrollPosition < targetBottom) {\r\n          link.classList.add('active');\r\n        } else {\r\n          link.classList.remove('active');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Update active link on scroll and on load\r\n  window.addEventListener('scroll', updateActiveNavLink);\r\n  window.addEventListener('load', updateActiveNavLink);\r\n\r\n})(window, document);\r\n\r\n// ========== Location Cascading Dropdowns ==========\r\njQuery(document).ready(function($) {\r\n  // Check if we're on checkout page with location fields\r\n  if (!$('#user_state').length) {\r\n    return;\r\n  }\r\n\r\n  var $stateSelect = $('#user_state');\r\n  var $districtSelect = $('#user_district');\r\n  var $blockSelect = $('#user_block');\r\n\r\n  // When state changes, load districts\r\n  $stateSelect.on('change', function() {\r\n    var stateId = $(this).val();\r\n    \r\n    // Reset district and block\r\n    $districtSelect.html('<option value=\"\">Select State First</option>').prop('disabled', true);\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!stateId) {\r\n      return;\r\n    }\r\n    \r\n    // Load districts\r\n    $.ajax({\r\n      url: pmpro_nbstup_ajax.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_districts',\r\n        state_id: stateId,\r\n        nonce: pmpro_nbstup_ajax.nonce\r\n      },\r\n      beforeSend: function() {\r\n        $districtSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select District</option>';\r\n          $.each(response.data, function(index, district) {\r\n            options += '<option value=\"' + district.id + '\">' + district.name + '</option>';\r\n          });\r\n          $districtSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $districtSelect.html('<option value=\"\">No districts available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $districtSelect.html('<option value=\"\">Error loading districts</option>');\r\n      }\r\n    });\r\n  });\r\n\r\n  // When district changes, load blocks\r\n  $districtSelect.on('change', function() {\r\n    var districtId = $(this).val();\r\n    \r\n    // Reset block\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!districtId) {\r\n      return;\r\n    }\r\n    \r\n    // Load blocks\r\n    $.ajax({\r\n      url: pmpro_nbstup_ajax.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_blocks',\r\n        district_id: districtId,\r\n        nonce: pmpro_nbstup_ajax.nonce\r\n      },\r\n      beforeSend: function() {\r\n        $blockSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select Block</option>';\r\n          $.each(response.data, function(index, block) {\r\n            options += '<option value=\"' + block.id + '\">' + block.name + '</option>';\r\n          });\r\n          $blockSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $blockSelect.html('<option value=\"\">No blocks available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $blockSelect.html('<option value=\"\">Error loading blocks</option>');\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\n// ========== Contributions Admin: Select All ==========\r\njQuery(document).ready(function($) {\r\n  var $selectAll = $('#select-all');\r\n  if (!$selectAll.length) {\r\n    return;\r\n  }\r\n\r\n  $selectAll.on('change', function() {\r\n    $('input[name=\"user_ids[]\"]').prop('checked', this.checked);\r\n  });\r\n});\r\n"]}