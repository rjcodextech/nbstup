{"version":3,"sources":["frontend.js"],"names":["window","document","sidebar","querySelector","updateActiveNavLink","navLinks","querySelectorAll","scrollPosition","pageYOffset","forEach","link","targetTop","targetId","getAttribute","slice","target","getElementById","targetBottom","offsetTop","offsetHeight","classList","add","remove","addEventListener","event","closest","preventDefault","scrollTo","top","getBoundingClientRect","behavior","jQuery","ready","$","$stateSelect","$districtSelect","$blockSelect","length","on","stateId","this","val","html","prop","ajax","url","pmpro_nbstup_ajax","ajax_url","type","data","action","state_id","nonce","beforeSend","success","response","options","each","index","district","id","name","error","districtId","district_id","block","$selectAll","checked","$aadhar","$memberPassword","$username","$password","$password2","$bemail","$bconfirm","$memberDetails","syncFromMemberDetails","aadharValue","trim","replace","passwordValue","emailValue","find","$containers","showMessage","$form","message","removeAttr","text","setLoading","isLoading","toggleClass","clearFieldErrors","removeClass","setFieldError","$field","$wrapper","fieldName","attr","errorId","addClass","class","appendTo","pmpro_nbstup_login","$container","not","$tab","$panel","$input","value","sanitized","redirect","user_login","user_password","remember","is","aadharNumber","aadhar_number","member_password","isValid","$login","validation_login","validation_password","test","validation_aadhar_format","validation_aadhar","dataType","done","location","href","generic_error","fail","always","validation_message","$firstError","first","trigger"],"mappings":"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","file":"frontend.js","sourcesContent":["// Frontend JS for NBSTUP account layout.\r\n// This file is processed by Gulp into `assets/js/dist/frontend.js`.\r\n// Add any interactive behavior for the left menu / account layout here.\r\n\r\n(function (window, document) {\r\n  'use strict';\r\n\r\n  var sidebar = document.querySelector('.pmpro-nbstup-account-sidebar');\r\n  if (!sidebar) {\r\n    return;\r\n  }\r\n\r\n  // Smooth scroll for in-page anchor links inside the NBSTUP menu.\r\n  sidebar.addEventListener('click', function (event) {\r\n    var link = event.target.closest('a[href^=\"#\"]');\r\n    if (!link) {\r\n      return;\r\n    }\r\n\r\n    var targetId = link.getAttribute('href').slice(1);\r\n    var target = document.getElementById(targetId);\r\n    if (!target) {\r\n      return;\r\n    }\r\n\r\n    event.preventDefault();\r\n\r\n    window.scrollTo({\r\n      top: target.getBoundingClientRect().top + window.pageYOffset - 80,\r\n      behavior: 'smooth'\r\n    });\r\n  });\r\n\r\n  // Function to update active navigation link based on scroll position\r\n  function updateActiveNavLink() {\r\n    var navLinks = sidebar.querySelectorAll('.pmpro-nbstup-account-nav a[href^=\"#\"]');\r\n    var scrollPosition = window.pageYOffset + 100; // Offset for header\r\n\r\n    navLinks.forEach(function(link) {\r\n      var targetId = link.getAttribute('href').slice(1);\r\n      var target = document.getElementById(targetId);\r\n      if (target) {\r\n        var targetTop = target.offsetTop;\r\n        var targetBottom = targetTop + target.offsetHeight;\r\n\r\n        if (scrollPosition >= targetTop && scrollPosition < targetBottom) {\r\n          link.classList.add('active');\r\n        } else {\r\n          link.classList.remove('active');\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  // Update active link on scroll and on load\r\n  window.addEventListener('scroll', updateActiveNavLink);\r\n  window.addEventListener('load', updateActiveNavLink);\r\n\r\n})(window, document);\r\n\r\n// ========== Location Cascading Dropdowns ==========\r\njQuery(document).ready(function($) {\r\n  // Check if we're on checkout page with location fields\r\n  if (!$('#user_state').length) {\r\n    return;\r\n  }\r\n\r\n  var $stateSelect = $('#user_state');\r\n  var $districtSelect = $('#user_district');\r\n  var $blockSelect = $('#user_block');\r\n\r\n  // When state changes, load districts\r\n  $stateSelect.on('change', function() {\r\n    var stateId = $(this).val();\r\n    \r\n    // Reset district and block\r\n    $districtSelect.html('<option value=\"\">Select State First</option>').prop('disabled', true);\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!stateId) {\r\n      return;\r\n    }\r\n    \r\n    // Load districts\r\n    $.ajax({\r\n      url: pmpro_nbstup_ajax.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_districts',\r\n        state_id: stateId,\r\n        nonce: pmpro_nbstup_ajax.nonce\r\n      },\r\n      beforeSend: function() {\r\n        $districtSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select District</option>';\r\n          $.each(response.data, function(index, district) {\r\n            options += '<option value=\"' + district.id + '\">' + district.name + '</option>';\r\n          });\r\n          $districtSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $districtSelect.html('<option value=\"\">No districts available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $districtSelect.html('<option value=\"\">Error loading districts</option>');\r\n      }\r\n    });\r\n  });\r\n\r\n  // When district changes, load blocks\r\n  $districtSelect.on('change', function() {\r\n    var districtId = $(this).val();\r\n    \r\n    // Reset block\r\n    $blockSelect.html('<option value=\"\">Select District First</option>').prop('disabled', true);\r\n    \r\n    if (!districtId) {\r\n      return;\r\n    }\r\n    \r\n    // Load blocks\r\n    $.ajax({\r\n      url: pmpro_nbstup_ajax.ajax_url,\r\n      type: 'POST',\r\n      data: {\r\n        action: 'pmpro_nbstup_get_blocks',\r\n        district_id: districtId,\r\n        nonce: pmpro_nbstup_ajax.nonce\r\n      },\r\n      beforeSend: function() {\r\n        $blockSelect.html('<option value=\"\">Loading...</option>');\r\n      },\r\n      success: function(response) {\r\n        if (response.success && response.data.length > 0) {\r\n          var options = '<option value=\"\">Select Block</option>';\r\n          $.each(response.data, function(index, block) {\r\n            options += '<option value=\"' + block.id + '\">' + block.name + '</option>';\r\n          });\r\n          $blockSelect.html(options).prop('disabled', false);\r\n        } else {\r\n          $blockSelect.html('<option value=\"\">No blocks available</option>');\r\n        }\r\n      },\r\n      error: function() {\r\n        $blockSelect.html('<option value=\"\">Error loading blocks</option>');\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\n// ========== Contributions Admin: Select All ==========\r\njQuery(document).ready(function($) {\r\n  var $selectAll = $('#select-all');\r\n  if (!$selectAll.length) {\r\n    return;\r\n  }\r\n\r\n  $selectAll.on('change', function() {\r\n    $('input[name=\"user_ids[]\"]').prop('checked', this.checked);\r\n  });\r\n});\r\n\r\n// ========== Login Tabs + AJAX Login ==========\r\njQuery(document).ready(function ($) {\r\n  var $memberDetails = $('#pmpro_form_fieldset-member-details');\r\n  if ($memberDetails.length) {\r\n    var $aadhar = $memberDetails.find('#aadhar_number');\r\n    var $memberPassword = $memberDetails.find('#member_password');\r\n    var $username = $('#pmpro_user_fields #username');\r\n    var $password = $('#pmpro_user_fields #password');\r\n    var $password2 = $('#pmpro_user_fields #password2');\r\n    var $bemail = $('#pmpro_user_fields #bemail');\r\n    var $bconfirm = $('#pmpro_user_fields #bconfirmemail');\r\n\r\n    function buildEmail(aadharValue) {\r\n      return aadharValue ? aadharValue + '@nbstup.com' : '';\r\n    }\r\n\r\n    function syncFromMemberDetails() {\r\n      var aadharValue = $.trim($aadhar.val()).replace(/\\D+/g, '');\r\n      var passwordValue = $memberPassword.val() || '';\r\n\r\n      if ($username.length) {\r\n        $username.val(aadharValue);\r\n      }\r\n      if ($password.length) {\r\n        $password.val(passwordValue);\r\n      }\r\n      if ($password2.length) {\r\n        $password2.val(passwordValue);\r\n      }\r\n      var emailValue = buildEmail(aadharValue);\r\n      if ($bemail.length) {\r\n        $bemail.val(emailValue);\r\n      }\r\n      if ($bconfirm.length) {\r\n        $bconfirm.val(emailValue);\r\n      }\r\n    }\r\n\r\n    $memberDetails.on('input change', '#aadhar_number, #member_password', syncFromMemberDetails);\r\n    syncFromMemberDetails();\r\n  }\r\n\r\n  var $containers = $('.pmpro-nbstup-login-tabs');\r\n  if (!$containers.length || typeof pmpro_nbstup_login === 'undefined') {\r\n    return;\r\n  }\r\n\r\n  $containers.each(function () {\r\n    var $container = $(this);\r\n    $container.find('.pmpro-nbstup-login-panel').not('.is-active').attr('hidden', true);\r\n\r\n    $container.on('click', '.pmpro-nbstup-login-tab', function () {\r\n      var $tab = $(this);\r\n      var target = $tab.data('tab');\r\n      $container.find('.pmpro-nbstup-login-tab')\r\n        .removeClass('is-active')\r\n        .attr('aria-selected', 'false');\r\n      $tab.addClass('is-active').attr('aria-selected', 'true');\r\n\r\n      $container.find('.pmpro-nbstup-login-panel')\r\n        .removeClass('is-active')\r\n        .attr('hidden', true);\r\n\r\n      var $panel = $container.find('.pmpro-nbstup-login-panel[data-panel=\"' + target + '\"]');\r\n      $panel.addClass('is-active').removeAttr('hidden');\r\n      $panel.find('.pmpro-nbstup-login-message').attr('hidden', true).text('');\r\n      clearFieldErrors($panel.find('.pmpro-nbstup-login-form'));\r\n    });\r\n  });\r\n\r\n  function showMessage($form, message) {\r\n    var $message = $form.closest('.pmpro-nbstup-login-panel').find('.pmpro-nbstup-login-message');\r\n    $message.removeAttr('hidden').text(message);\r\n  }\r\n\r\n  function setLoading($form, isLoading) {\r\n    var $button = $form.find('button[type=\"submit\"]');\r\n    $button.prop('disabled', isLoading);\r\n    $form.toggleClass('is-loading', isLoading);\r\n  }\r\n\r\n  function clearFieldErrors($form) {\r\n    if (!$form || !$form.length) {\r\n      return;\r\n    }\r\n\r\n    $form.find('.pmpro-nbstup-member-login__field').removeClass('has-error');\r\n    $form.find('.pmpro-nbstup-field-error').remove();\r\n    $form.find('.pmpro-nbstup-member-login__input').removeAttr('aria-invalid aria-describedby');\r\n  }\r\n\r\n  function setFieldError($form, $field, message) {\r\n    var $wrapper = $field.closest('.pmpro-nbstup-member-login__field');\r\n    var fieldName = $field.attr('name') || 'field';\r\n    var formType = $form.data('login-type') || 'login';\r\n    var errorId = 'pmpro-nbstup-' + formType + '-' + fieldName + '-error';\r\n\r\n    $wrapper.addClass('has-error');\r\n    $field.attr('aria-invalid', 'true').attr('aria-describedby', errorId);\r\n\r\n    if (!$wrapper.find('#' + errorId).length) {\r\n      $('<div/>', {\r\n        class: 'pmpro-nbstup-field-error',\r\n        id: errorId,\r\n        text: message\r\n      }).appendTo($wrapper);\r\n    }\r\n  }\r\n\r\n  function clearFieldError($field) {\r\n    var $wrapper = $field.closest('.pmpro-nbstup-member-login__field');\r\n    $wrapper.removeClass('has-error');\r\n    $wrapper.find('.pmpro-nbstup-field-error').remove();\r\n    $field.removeAttr('aria-invalid aria-describedby');\r\n  }\r\n\r\n  function validateForm($form) {\r\n    var isValid = true;\r\n    var type = $form.data('login-type');\r\n\r\n    if (type === 'admin') {\r\n      var $login = $form.find('input[name=\"user_login\"]');\r\n      var $password = $form.find('input[name=\"user_password\"]');\r\n\r\n      if (!$.trim($login.val())) {\r\n        setFieldError($form, $login, pmpro_nbstup_login.validation_login || 'Please enter your username or email.');\r\n        isValid = false;\r\n      }\r\n\r\n      if (!$.trim($password.val())) {\r\n        setFieldError($form, $password, pmpro_nbstup_login.validation_password || 'Please enter your password.');\r\n        isValid = false;\r\n      }\r\n    } else {\r\n      var $aadhar = $form.find('input[name=\"aadhar_number\"]');\r\n      var $memberPassword = $form.find('input[name=\"member_password\"]');\r\n      var aadharValue = $.trim($aadhar.val()).replace(/\\s+/g, '');\r\n\r\n      if (!aadharValue) {\r\n        setFieldError($form, $aadhar, pmpro_nbstup_login.validation_aadhar || 'Please enter your Aadhar number.');\r\n        isValid = false;\r\n      } else if (!/^\\d{12}$/.test(aadharValue)) {\r\n        setFieldError($form, $aadhar, pmpro_nbstup_login.validation_aadhar_format || 'Enter a valid 12-digit Aadhar number.');\r\n        isValid = false;\r\n      }\r\n\r\n      if (!$.trim($memberPassword.val())) {\r\n        setFieldError($form, $memberPassword, pmpro_nbstup_login.validation_password || 'Please enter your password.');\r\n        isValid = false;\r\n      }\r\n    }\r\n\r\n    return isValid;\r\n  }\r\n\r\n  $(document).on('input', 'input[name=\"aadhar_number\"]', function () {\r\n    var $input = $(this);\r\n    var value = $input.val();\r\n    var sanitized = value.replace(/\\D+/g, '').slice(0, 12);\r\n\r\n    if (value !== sanitized) {\r\n      $input.val(sanitized);\r\n    }\r\n  });\r\n\r\n  $(document).on('input', '.pmpro-nbstup-member-login__input', function () {\r\n    clearFieldError($(this));\r\n  });\r\n\r\n  $(document).on('submit', '.pmpro-nbstup-login-form', function (event) {\r\n    event.preventDefault();\r\n\r\n    var $form = $(this);\r\n    var type = $form.data('login-type');\r\n    clearFieldErrors($form);\r\n\r\n    var data = {\r\n      action: type === 'admin' ? 'pmpronbstup_admin_login' : 'pmpronbstup_member_login',\r\n      nonce: pmpro_nbstup_login.nonce,\r\n      redirect: $form.data('redirect') || ''\r\n    };\r\n\r\n    if (type === 'admin') {\r\n      data.user_login = $.trim($form.find('input[name=\"user_login\"]').val());\r\n      data.user_password = $form.find('input[name=\"user_password\"]').val();\r\n      data.remember = $form.find('input[name=\"remember\"]').is(':checked') ? 1 : 0;\r\n    } else {\r\n      var aadharNumber = $.trim($form.find('input[name=\"aadhar_number\"]').val()).replace(/\\D+/g, '');\r\n      data.aadhar_number = aadharNumber;\r\n      data.member_password = $form.find('input[name=\"member_password\"]').val();\r\n    }\r\n\r\n    if (!validateForm($form)) {\r\n      showMessage($form, pmpro_nbstup_login.validation_message || 'Please fix the highlighted fields and try again.');\r\n      var $firstError = $form.find('.pmpro-nbstup-member-login__field.has-error').first();\r\n      if ($firstError.length) {\r\n        $firstError.find('input').first().trigger('focus');\r\n      }\r\n      return;\r\n    }\r\n\r\n    setLoading($form, true);\r\n\r\n    $.ajax({\r\n      url: pmpro_nbstup_login.ajax_url,\r\n      type: 'POST',\r\n      dataType: 'json',\r\n      data: data\r\n    })\r\n      .done(function (response) {\r\n        if (response && response.success) {\r\n          var redirect = response.data && response.data.redirect ? response.data.redirect : window.location.href;\r\n          window.location.href = redirect;\r\n        } else {\r\n          var message = response && response.data && response.data.message ? response.data.message : pmpro_nbstup_login.generic_error;\r\n          showMessage($form, message);\r\n        }\r\n      })\r\n      .fail(function () {\r\n        showMessage($form, pmpro_nbstup_login.generic_error);\r\n      })\r\n      .always(function () {\r\n        setLoading($form, false);\r\n      });\r\n  });\r\n});\r\n"]}